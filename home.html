<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tag Collector</title>
  <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-firestore-compat.js"></script>
</head>
<body>
  <h2>Submitting Tag...</h2>

  <script>
    // Replace this with your Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyAIiWvA0EcLsGE0OdEQ6YHne5EDurUVAXU",
  authDomain: "codingprojects-ade75.firebaseapp.com",
  projectId: "codingprojects-ade75",
  storageBucket: "codingprojects-ade75.firebasestorage.app",
  messagingSenderId: "782742130363",
  appId: "1:782742130363:web:79e8dbc417c0d2aa3fe39e",
  measurementId: "G-DP2ZRVDTFT"
};
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    async function main() {
      // Get the tag ID from the URL path
      const urlParts = window.location.pathname.split('/');
      const tagId = urlParts[urlParts.length - 1] || urlParts[urlParts.length - 2]; // Handles trailing slash

      if (!tagId) {
        alert("Invalid tag ID in URL.");
        return;
      }

      // Ask the user for the account key
      const accountKey = prompt("Enter your account key:");
      if (!accountKey) {
        alert("No account key provided.");
        return;
      }

      try {
        // Upload to Firestore
        await db.collection("tags").add({
          tagId: tagId,
          accountKey: accountKey,
          timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });
        document.body.innerHTML = "<h2>Tag uploaded successfully!</h2>";
      } catch (error) {
        console.error("Error uploading tag:", error);
        document.body.innerHTML = "<h2>Failed to upload tag.</h2>";
      }
    }

    main();
  </script>
</body>
</html>
