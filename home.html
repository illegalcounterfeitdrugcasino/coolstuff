
<!--
  ============================================================
   Â© 2025-2025 Bitflash Enterprises. All rights reserved.
  ============================================================
   This file is part of the Free Luxury Giveaway Casino.

   Unauthorized reproduction, distribution, or modification 
   of this file, in whole or in part, is strictly prohibited.

   This code and any associated logic is proprietary and 
   confidential to Bitflash Enterprises.

   For licensing, contributions, or inquiries, contact:
   Email: support@flgc.xyz | FLGC Support Website: https://cs.flgc.xyz

   Version: 1.0.0 | Updated: 2025-06-29
-->
<!DOCTYPE html>
<html lang="en">
<head>
<head>
   <script>
    if (location.pathname !== '/' || location.search) {
      document.write(`
        <style>
          html, body {
            background: black;
            margin: 0;
            padding: 0;
            height: 100%;
          }
          #status {
            color: white;
            font-size: 8px;
            position: absolute;
            top: 4px;
            left: 6px;
            font-family: monospace;
          }
        </style>
        <div id="status">Redirecting to / ...</div>
      `);
     // location.replace('/');
    }
  </script>
</head>

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- Mobile / App Support -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="FLGC">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<meta name="mobile-web-app-capable" content="yes">
<link rel="icon" href="/apple-touch-icon.png">

<!-- SEO Essentials -->
<title>FLGC - Free Luxury Giveaway Casino | Official Landing Page</title>
<meta name="description" content="FLGC (Free Luxury Giveaway Casino) is your gateway to luxury prizes and premium free casino games. Join now for exclusive giveaways and 5 FREE SPINS!">
<meta name="keywords" content="FLGC, Free Luxury Giveaway Casino, Free Casino Games, Luxury Prizes, FLGC official, Free Spins Casino">
<meta name="robots" content="index, follow">
<link rel="canonical" href="http://flgc.xyz/">

<!-- Google Search Verification -->
<meta name="google-site-verification" content="X2Dy0jyjgX5gXKpUiVxU2RNqx1exATmeh_l_fS39_K4" />

<!-- Performance & Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root {
            --gold: #FFD700;
            --gold-light: #FFF8DC;
            --gold-dark: #B8860B;
            --white: #FFFFFF;
            --black: #000000;
            --gray-50: #F9FAFB;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --gray-300: #D1D5DB;
            --gray-400: #9CA3AF;
            --gray-500: #6B7280;
            --gray-600: #4B5563;
            --gray-700: #374151;
            --gray-800: #1F2937;
            --gray-900: #111827;
            --blue: #3B82F6;
            --green: #10B981;
            --red: #EF4444;
            --purple: #8B5CF6;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            --shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);
            --border-radius: 12px;
            --border-radius-lg: 16px;
            --transition-fast: all 0.15s ease-in-out;
            --transition-std: all 0.3s ease-in-out;
            --transition-slow: all 0.5s ease-in-out;

            /* Theme variables */
            --bg-primary: linear-gradient(135deg, var(--gray-900) 0%, var(--gray-800) 50%, var(--gray-900) 100%);
            --bg-secondary: rgba(255, 255, 255, 0.05);
            --text-primary: var(--white);
            --text-secondary: var(--gray-400);
            --border-color: rgba(255, 255, 255, 0.1);
            --accent-color: var(--gold);
            --accent-text-color: var(--black);
        }

        body.light-theme {
            --bg-primary: linear-gradient(135deg, var(--gray-100) 0%, var(--gray-50) 50%, var(--gray-100) 100%);
            --bg-secondary: rgba(0, 0, 0, 0.03);
            --text-primary: var(--gray-800);
            --text-secondary: var(--gray-500);
            --border-color: rgba(0, 0, 0, 0.1);
            --accent-text-color: var(--white);
        }

        body.gold-theme {
            --bg-primary: linear-gradient(135deg, var(--gold-dark) 0%, #A07000 50%, var(--gold-dark) 100%);
            --bg-secondary: rgba(255, 255, 255, 0.1);
            --text-primary: var(--gold-light);
            --text-secondary: #E0C078; /* Lighter gold for secondary text */
            --border-color: rgba(255, 215, 0, 0.3);
            --accent-color: var(--white);
            --accent-text-color: var(--gold-dark);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            background: var(--bg-primary);
            display: flex;
            flex-direction: column; /* For footer */
            justify-content: center;
            align-items: center;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
            transition: background var(--transition-std), color var(--transition-std);
            font-size: 16px; /* Base font size */
        }
        body.font-size-large { font-size: 18px; }
        body.font-size-xlarge { font-size: 20px; }


        body::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: radial-gradient(circle at 1px 1px, rgba(255, 215, 0, 0.03) 1px, transparent 0);
            background-size: 40px 40px;
            pointer-events: none;
            z-index: 0;
            opacity: 0.5;
        }
        body.light-theme::before {
             background-image: radial-gradient(circle at 1px 1px, rgba(0,0,0, 0.03) 1px, transparent 0);
        }

        .bg-decoration {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 1;
        }
        .floating-orb {
            position: absolute; border-radius: 50%;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.07), rgba(255, 215, 0, 0.03));
            animation: gentleFloat 20s ease-in-out infinite;
            transition: transform 0.3s ease-out, background 0.3s ease-out;
        }
        .floating-orb:hover {
            transform: scale(1.1);
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 215, 0, 0.08));
        }
        body.no-animations .floating-orb, body.no-animations .live-dot, body.no-animations body.no-animations { animation: none !important; }

        .orb-1 { width: 200px; height: 200px; top: 10%; left: 5%; animation-delay: 0s; }
        .orb-2 { width: 150px; height: 150px; top: 60%; right: 10%; animation-delay: -7s; }
        .orb-3 { width: 100px; height: 100px; bottom: 15%; left: 55%; animation-delay: -14s; }
        .orb-4 { width: 120px; height: 120px; top: 30%; right: 40%; animation-delay: -3s; opacity: 0.7;}

.header::after {
    content: '';
    position: absolute;
    top: 0;
    left: -40%; /* Initial position, shimmer is off-screen to the left */
    width: 40%; /* Width of the light band */
    height: 100%; /* Cover the full height of the header */
    background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.2), /* Shimmer color and opacity */
        transparent
    );
    animation: header-sweep 4s infinite 1s; /* Animation timing */
    z-index: 1; 
    pointer-events: none; 
}

        .main-container {
            position: relative; z-index: 10;
            max-width: 520px; width: 90%;
            margin-top: 70px; /* Increased Space for header elements like user profile */
            margin-bottom: 20px; /* Space for footer */
        }

        .card {
            background: var(--bg-secondary);
            backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-2xl);
            overflow: hidden; position: relative;
            animation: cardSlideIn 0.8s cubic-bezier(0.25, 0.8, 0.25, 1);
            transition: background var(--transition-std), border-color var(--transition-std);
        }
        .card::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent-color), transparent);
            opacity: 0.5;
        }

        .header {
            padding: 30px 30px 25px; text-align: center;
            border-bottom: 1px solid var(--border-color);
            position: relative;
        }
        .logo {
            font-size: 2em; font-weight: 800; margin-bottom: 6px;
            background: linear-gradient(135deg, var(--accent-color), var(--gold-light));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            background-clip: text; letter-spacing: -0.5px;
            line-height: 1.2;
            position: relative;
            display: inline-block; /* For shimmer to work correctly */
        }
        .logo-shimmer::after { /* Shimmer effect for logo */
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 75%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 4s infinite 1s;
        }

        body.light-theme .logo { background: linear-gradient(135deg, var(--accent-color), var(--gold-dark)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;}
        body.gold-theme .logo { background: linear-gradient(135deg, var(--white), var(--gold-light)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;}


        .tagline { font-size: 0.95em; color: var(--text-secondary); font-weight: 400; margin-bottom: 20px; }
        .live-indicator {
            display: inline-flex; align-items: center; gap: 8px;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
            padding: 6px 12px; border-radius: 20px;
            font-size: 0.8em; font-weight: 500; color: var(--green);
        }
        .live-dot { width: 7px; height: 7px; background: var(--green); border-radius: 50%; animation: pulse 1.5s infinite; }

        .stats {
            padding: 25px 30px; display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 20px; border-bottom: 1px solid var(--border-color);
        }
        .stat { text-align: center; }
        .stat-number { font-size: 1.6em; font-weight: 700; color: var(--text-primary); margin-bottom: 2px; font-family: 'JetBrains Mono', monospace; animation: numberPulse 5s infinite ease-in-out; }
        .stat-label { font-size: 0.75em; color: var(--text-secondary); font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; }
        .countdown-timer { margin-top:15px; font-size:0.9em; color: var(--text-secondary); }
        .countdown-timer strong { color: var(--accent-color); font-family: 'JetBrains Mono', monospace; }


        .features { padding: 25px 30px; border-bottom: 1px solid var(--border-color); }
        .features-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
        .feature {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius); padding: 20px;
            text-align: center; transition: var(--transition-fast); cursor: pointer;
        }
        .feature:hover, .feature:focus-visible {
            background: rgba(255, 255, 255, 0.07);
            border-color: var(--accent-color);
            transform: translateY(-3px) scale(1.03);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        .feature.wide {
    grid-column: span 2;
    text-align: left;
    display: flex;
    align-items: center;
    gap: 20px;
}
        body.light-theme .feature { background: rgba(0,0,0,0.02); }
        body.light-theme .feature:hover, body.light-theme .feature:focus-visible { background: rgba(0,0,0,0.05); border-color: var(--accent-color); }
        body.gold-theme .feature { background: rgba(255,255,255,0.05); }
        body.gold-theme .feature:hover, body.gold-theme .feature:focus-visible { background: rgba(255,255,255,0.1); border-color: var(--white); }

        .feature-icon { font-size: 1.8em; margin-bottom: 8px; color: var(--accent-color); }
        .feature-title { font-size: 1em; font-weight: 600; color: var(--text-primary); margin-bottom: 4px; }
        .feature-desc { font-size: 0.8em; color: var(--text-secondary); line-height: 1.4; }

        .action { padding: 30px; text-align: center; }
        .main-button {
            background: linear-gradient(135deg, var(--accent-color), var(--gold-dark));
            color: var(--accent-text-color);
            font-weight: 700; font-size: 1.1em; padding: 16px 32px;
            border: none; border-radius: var(--border-radius); cursor: pointer;
            transition: var(--transition-fast), box-shadow 0.2s ease-out, transform 0.2s ease-out; 
            box-shadow: var(--shadow-lg);
            position: relative; overflow: hidden; width: 100%; max-width: 300px;
            letter-spacing: 0.5px; text-transform: uppercase;
        }
        .main-button:hover, .main-button:focus-visible { transform: translateY(-3px) scale(1.02); box-shadow: 0 0 30px rgba(255,215,0,0.4); }
        .main-button:active { transform: translateY(0) scale(1); box-shadow: var(--shadow-md); }
        .main-button i { margin-right: 8px; }
        .security-note { margin-top: 16px; font-size: 0.8em; color: var(--gray-500); display: flex; align-items: center; justify-content: center; gap: 6px; }
        body.light-theme .security-note { color: var(--gray-600); }
        body.gold-theme .security-note { color: var(--gold-light); opacity: 0.8; }


        /* Top Bar for Settings and Info */
        .top-bar {
            position: fixed;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }
        .icon-button {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            border-radius: 50%;
            width: 44px; height: 44px; /* Slightly larger */
            display: flex; justify-content: center; align-items: center;
            font-size: 1.3em; cursor: pointer;
            transition: var(--transition-fast);
            box-shadow: var(--shadow-md);
        }
        .icon-button:hover, .icon-button:focus-visible { background-color: rgba(255,255,255,0.1); border-color: var(--accent-color); transform: scale(1.1) rotate(5deg); box-shadow: 0 0 15px var(--accent-color); }
        body.light-theme .icon-button { background: var(--white); color: var(--gray-700); border-color: var(--gray-300); }
        body.light-theme .icon-button:hover, body.light-theme .icon-button:focus-visible { background-color: var(--gray-50); border-color: var(--accent-color); }
        body.gold-theme .icon-button { background: rgba(255,255,255,0.1); color: var(--gold-light); border-color: rgba(255,215,0,0.4); }
        body.gold-theme .icon-button:hover, body.gold-theme .icon-button:focus-visible { background-color: rgba(255,255,255,0.2); border-color: var(--white); }

        /* User Profile Dropdown */
        .user-profile-dropdown {
            position: absolute;
            top: 55px; /* Below the icon button */
            right: 0;
            background: var(--gray-800);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            z-index: 1001;
            width: 220px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: opacity var(--transition-std), visibility var(--transition-std), transform var(--transition-std);
        }
        .user-profile-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        .user-profile-header { padding: 15px; border-bottom: 1px solid var(--border-color); text-align: center; }
        .user-profile-header strong { display: block; color: var(--text-primary); font-size: 1.1em; }
        .user-profile-header span { font-size: 0.85em; color: var(--text-secondary); }
        .user-profile-dropdown ul { list-style: none; padding: 10px 0; }
        .user-profile-dropdown ul li a {
            display: block; padding: 10px 15px; color: var(--text-secondary);
            text-decoration: none; transition: background-color var(--transition-fast), color var(--transition-fast);
            font-size: 0.95em;
        }
        .user-profile-dropdown ul li a:hover, .user-profile-dropdown ul li a:focus-visible { background-color: var(--gray-700); color: var(--accent-color); }
        .user-profile-dropdown ul li a i { margin-right: 10px; width: 16px; text-align: center; }
        body.light-theme .user-profile-dropdown { background: var(--gray-50); }
        body.light-theme .user-profile-dropdown ul li a:hover, body.light-theme .user-profile-dropdown ul li a:focus-visible { background-color: var(--gray-200); }
        body.gold-theme .user-profile-dropdown { background: #2c2000; }
        body.gold-theme .user-profile-dropdown ul li a:hover, body.gold-theme .user-profile-dropdown ul li a:focus-visible { background-color: rgba(255,255,255,0.1); }


        /* Info Panel (Sidebar) */
        .info-panel {
            position: fixed; top: 0; right: -350px; /* Start off-screen */
            width: 320px; height: 100%;
            background: var(--gray-800); /* Darker for contrast */
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            border-left: 1px solid var(--border-color);
            padding: 20px;
            font-family: 'JetBrains Mono', monospace; font-size: 0.8em;
            color: var(--gray-300); z-index: 999;
            transition: right var(--transition-std);
            overflow-y: auto;
            box-shadow: -10px 0 25px rgba(0,0,0,0.2);
        }
        body.light-theme .info-panel { background: var(--gray-50); color: var(--gray-700); border-left-color: var(--gray-300); }
        body.gold-theme .info-panel { background: #2c2000; color: var(--gold-light); border-left-color: rgba(255,215,0,0.3); }


        .info-panel.visible { right: 0; }
        .info-panel-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid var(--border-color); }
        .info-panel-title { font-weight: 600; color: var(--text-primary); font-size: 1.1em; }
        .info-item { display: flex; justify-content: space-between; margin-bottom: 8px; line-height: 1.5; }
        .info-label { color: var(--text-secondary); }
        .info-value { color: var(--text-primary); font-weight: 500; word-break: break-all; }
        .info-status { display: inline-block; width: 8px; height: 8px; border-radius: 50%; margin-left: 6px; }
        .status-online { background: var(--green); box-shadow: 0 0 5px var(--green); }
        .status-error { background: var(--red); box-shadow: 0 0 5px var(--red); }
        .status-warning { background: var(--gold); box-shadow: 0 0 5px var(--gold); }
        .status-loading { background: var(--gold); animation: pulse 1s infinite; box-shadow: 0 0 5px var(--gold); }
        .status-unknown { background: var(--gray-500); }
        .system-status-item { padding: 5px 0; font-size: 0.9em; }


        /* Modal Styles */
        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(10px);
            display: none; justify-content: center; align-items: center;
            z-index: 1050; opacity: 0; transition: opacity var(--transition-std);
        }
        .modal.active { display: flex; opacity: 1; }
        .modal-content {
            background: var(--bg-secondary);
            padding: 30px; border-radius: var(--border-radius-lg);
            border: 1px solid var(--border-color);
            width: 90%; max-width: 500px;
            box-shadow: var(--shadow-2xl);
            transform: scale(0.95) translateY(10px);
            transition: transform var(--transition-std), opacity var(--transition-std);
        }
        .modal.active .modal-content { transform: scale(1) translateY(0); }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .modal-title { font-size: 1.5em; font-weight: 700; color: var(--text-primary); }
        .modal-close { background: none; border: none; font-size: 1.8em; color: var(--text-secondary); cursor: pointer; transition: var(--transition-fast), transform 0.2s ease-out; padding: 5px; line-height: 1;}
        .modal-close:hover, .modal-close:focus-visible { color: var(--accent-color); transform: scale(1.25); } /* Changed animation */
        .modal-body p { margin-bottom: 15px; line-height: 1.6; color: var(--text-secondary); }
        .modal-body strong { color: var(--text-primary); }
        .modal-body ul { margin-left: 20px; margin-bottom: 15px; color: var(--text-secondary); }
        .modal-body li { margin-bottom: 8px; }
        .modal-footer { margin-top: 25px; text-align: right; }
        .modal-button {
            background: var(--accent-color); color: var(--accent-text-color);
            padding: 10px 20px; border: none; border-radius: var(--border-radius);
            font-weight: 600; cursor: pointer; transition: var(--transition-fast);
        }
        .modal-button:hover, .modal-button:focus-visible { opacity: 0.85; transform: translateY(-1px); box-shadow: var(--shadow-md); }
        .modal-button.secondary { background: var(--gray-600); color: var(--white); margin-right: 10px; }
        body.light-theme .modal-button.secondary { background: var(--gray-300); color: var(--gray-800); }
        body.gold-theme .modal-button.secondary { background: rgba(255,255,255,0.2); color: var(--gold-light); }


        /* Settings Modal */
        .settings-modal .modal-content { max-width: 600px; }
        .settings-section { margin-bottom: 25px; }
        .settings-section h4 { font-size: 1.1em; font-weight: 600; margin-bottom: 12px; color: var(--text-primary); border-bottom: 1px solid var(--border-color); padding-bottom: 8px;}
        .settings-option { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; padding: 8px 0;}
        .settings-option label { font-size: 0.95em; color: var(--text-secondary); }
        .settings-option select, .settings-option input[type="range"], .settings-option .mock-input {
            background: var(--gray-700); color: var(--white); border: 1px solid var(--gray-600);
            border-radius: var(--border-radius); padding: 8px 12px; min-width: 150px;
            font-size: 0.9em;
        }
        body.light-theme .settings-option select, body.light-theme .settings-option input[type="range"], body.light-theme .settings-option .mock-input { background: var(--gray-100); color: var(--gray-800); border-color: var(--gray-300); }
        body.gold-theme .settings-option select, body.gold-theme .settings-option input[type="range"], body.gold-theme .settings-option .mock-input { background: rgba(0,0,0,0.2); color: var(--gold-light); border-color: rgba(255,215,0,0.3); }
        .setting-feedback { font-size: 0.8em; color: var(--text-secondary); margin-top: 5px; text-align: right; width: 100%;}


        .toggle-switch { position: relative; display: inline-block; width: 50px; height: 26px; }
        .toggle-switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--gray-600); transition: .4s; border-radius: 26px; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--accent-color); }
        input:checked + .slider:before { transform: translateX(24px); }
        body.light-theme .slider { background-color: var(--gray-300); }
        body.light-theme input:checked + .slider { background-color: var(--accent-color); }


        .radio-group label { margin-right: 15px; color: var(--text-secondary); cursor: pointer; }
        .radio-group input[type="radio"] { margin-right: 5px; accent-color: var(--accent-color); }


        /* Version Warning Modal */
        #versionWarningModal .modal-content { border-left: 5px solid var(--red); }
        #versionWarningText { font-size: 1em; line-height: 1.6; }

        /* Loading Overlay */
        .loading-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none; flex-direction: column; justify-content: center; align-items: center;
            z-index: 2000; opacity: 0; transition: opacity var(--transition-slow);
        }
        .loading-overlay.active { display: flex; opacity: 1; }
        .loading-text { font-size: 1em; color: var(--gray-300); font-weight: 500; }
        .loading-progress-bar-container { width: 200px; height: 8px; background-color: var(--gray-700); border-radius: 4px; overflow: hidden; margin-top: 15px;}
        .loading-progress-bar { width: 0%; height: 100%; background-color: var(--gold); transition: width 0.1s linear; }

@keyframes header-sweep {
    0% {
        left: -40%; 
    }
    25% { /* Sweep completes in 1 second (25% of 4s) */
        left: 100%; 
    }
    100% {
        left: 100%; 
    }
}

        /* Footer */
        .site-footer {
            width: 100%;
            padding: 30px 20px;
            background: rgba(0,0,0,0.2); /* Subtle dark background */
            text-align: center;
            font-size: 0.85em;
            color: var(--gray-400);
            margin-top: auto; /* Pushes footer to bottom */
            z-index: 5;
            border-top: 1px solid var(--border-color);
        }
        body.light-theme .site-footer { background: rgba(255,255,255,0.5); color: var(--gray-600); border-top-color: var(--gray-200); }
        body.gold-theme .site-footer { background: rgba(0,0,0,0.3); color: var(--gold-light); opacity:0.8; border-top-color: rgba(255,215,0,0.2); }

        .footer-links a { color: var(--text-secondary); text-decoration: none; margin: 0 10px; transition: color var(--transition-fast); }
        .footer-links a:hover, .footer-links a:focus-visible { color: var(--accent-color); text-decoration: underline; }
        .footer-socials { margin-top: 15px; }
        .footer-socials a { color: var(--text-secondary); font-size: 1.3em; margin: 0 8px; transition: color var(--transition-fast), transform var(--transition-fast); display: inline-block; }
        .footer-socials a:hover, .footer-socials a:focus-visible { color: var(--accent-color); transform: scale(1.2) translateY(-2px); }
        .footer-copyright { margin-top: 15px; font-size: 0.9em; }
        .footer-extra-buttons button {
            background: var(--accent-color); color: var(--accent-text-color);
            border: none; padding: 8px 15px; border-radius: var(--border-radius);
            cursor: pointer; margin: 5px; font-size: 0.9em; transition: var(--transition-fast);
        }
        .footer-extra-buttons button:hover, .footer-extra-buttons button:focus-visible { opacity: 0.85; box-shadow: var(--shadow-md); transform: translateY(-1px); }
        body.light-theme .footer-extra-buttons button { background: var(--accent-color); color: var(--white); }
        body.gold-theme .footer-extra-buttons button { background: var(--white); color: var(--gold-dark); }

        /* Promotional Banner */
        .promo-banner {
            background: linear-gradient(135deg, var(--accent-color), var(--gold-dark));
            color: var(--accent-text-color);
            padding: 15px 20px;
            text-align: center;
            border-radius: var(--border-radius);
            margin: 20px auto;
            max-width: 90%;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }
        .promo-banner p { margin: 0; font-weight: 500; font-size: 0.95em; }
        .promo-banner strong { font-weight: 700; }
        .promo-banner-close {
            position: absolute;
            top: 5px; right: 10px;
            background: none; border: none;
            color: var(--accent-text-color);
            font-size: 1.5em;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity var(--transition-fast);
        }
        .promo-banner-close:hover { opacity: 1; }

        /* Did You Know Tip */
        .did-you-know-tip {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-left: 4px solid var(--accent-color);
            padding: 15px;
            border-radius: var(--border-radius);
            margin: 20px auto;
            max-width: 90%;
            font-size: 0.9em;
            color: var(--text-secondary);
            position: relative;
        }
        .did-you-know-tip strong { color: var(--text-primary); }
        .did-you-know-tip-close {
            position: absolute;
            top: 8px; right: 10px;
            background: none; border: none;
            color: var(--text-secondary);
            font-size: 1.2em;
            cursor: pointer;
            transition: color var(--transition-fast);
        }
        .did-you-know-tip-close:hover { color: var(--accent-color); }


        /* Utility Classes */
        .hidden { display: none !important; }
        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0; }

        /* Animations */
        @keyframes gentleFloat {
            0%, 100% { transform: translate(0, 0) rotate(0deg); opacity: 0.7; }
            25% { transform: translate(15px, -15px) rotate(45deg); opacity: 1; }
            50% { transform: translate(-10px, -25px) rotate(90deg); opacity: 0.6; }
            75% { transform: translate(-15px, -10px) rotate(135deg); opacity: 0.9; }
        }
        @keyframes cardSlideIn {
            0% { opacity: 0; transform: translateY(30px) scale(0.98); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }
        @keyframes pulse { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.6; transform: scale(0.85); } }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes shimmer {
            0% { left: -100%; }
            20% { left: 120%; } /* Shimmer across */
            100% { left: 120%; } /* Stay off screen until next cycle */
        }
        @keyframes numberPulse {
            0%, 100% { transform: scale(1); opacity: 0.9; }
            50% { transform: scale(1.05); opacity: 1; }
        }


        /* Responsive Design */
        @media (max-width: 768px) {
            .main-container { width: 95%; margin-top: 80px; } /* Adjusted for user profile icon */
            .logo { font-size: 1.8em; }
            .stats { grid-template-columns: repeat(3, 1fr); gap: 12px; }
            .features-grid { grid-template-columns: 1fr; gap: 12px; }
            .info-panel { width: 280px; right: -300px; font-size: 0.75em;}
            .top-bar { top: 10px; right: 10px; }
            .icon-button { width: 40px; height: 40px; font-size: 1.1em; }
            .user-profile-dropdown { top: 50px; }
        }
        @media (max-width: 480px) {
            .header, .stats, .features, .action { padding: 20px; }
            .logo { font-size: 1.6em; }
            .stat-number { font-size: 1.4em; }
            .main-button { font-size: 1em; padding: 14px 28px; }
            .modal-content { padding: 20px; }
            .modal-title { font-size: 1.3em; }
            .site-footer { padding: 20px 15px; font-size: 0.8em; }
            .promo-banner { padding: 12px 15px; font-size: 0.9em;}
        }
        @media (prefers-reduced-motion: reduce) {
            body:not(.animations-forced) * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }
        @media (max-width: 600px) {
    .feature.wide {
        grid-column: span 1;
        flex-direction: column;
        text-align: center;
        align-items: center;
    }
}
        /* Styles for the clickable security note button */
.security-note-button {
    background: none;
    border: none;
    color: var(--gray-500); /* Or var(--text-secondary) */
    font-size: 0.8em;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    margin-top: 16px;
    cursor: pointer;
    padding: 5px;
    border-radius: var(--border-radius);
    transition: background-color var(--transition-fast), color var(--transition-fast);
    font-family: 'Inter', sans-serif;
}

.security-note-button:hover, .security-note-button:focus-visible {
    background-color: var(--bg-secondary);
    color: var(--accent-color);
}

body.light-theme .security-note-button {
    color: var(--gray-600);
}
body.light-theme .security-note-button:hover, body.light-theme .security-note-button:focus-visible {
    color: var(--accent-color);
}
body.gold-theme .security-note-button {
    color: var(--gold-light);
    opacity: 0.8;
}
body.gold-theme .security-note-button:hover, body.gold-theme .security-note-button:focus-visible {
    color: var(--white);
}

/* Styles for Certificate Info Modal - Tree (Enhanced for cleaner, modern look) */
#certificateInfoModal .modal-body {
    max-height: 70vh;
    overflow-y: auto;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.8em; /* Base size for tree content */
    line-height: 1.7; /* Improved line spacing */
    padding-right: 15px; /* More space for scrollbar */
    padding-left: 5px;
}

.cert-tree, .cert-tree ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
    position: relative; /* For positioning pseudo-elements (lines) */
}

/* Styling for nested ULs (branches of the tree) */
.cert-tree ul {
    padding-left: 22px; /* Indentation for nested levels */
    margin-left: 8px;  /* Aligns with the end of the parent's horizontal line */
}

/* Vertical connector line for each UL branch */
.cert-tree ul::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 10px; /* Extend line slightly less than full height */
    width: 2px;
    background: var(--border-color);
    border-radius: 1px; /* Rounded line */
}

/* Styling for each LI (node in the tree) */
.cert-tree li {
    margin: 0;
    padding: 3px 0 3px 20px; /* Space for the horizontal connector */
    position: relative;
}

/* Horizontal connector line for each LI node */
.cert-tree li::before {
    content: '';
    position: absolute;
    left: 0; /* Aligns with the parent UL's vertical line */
    top: 0.9em; /* Vertically center with the text (approx) */
    width: 15px; /* Length of the horizontal line */
    height: 2px;
    background: var(--border-color);
    border-radius: 1px; /* Rounded line */
}

/* Special styling for root LI elements (top level of the tree) */
.cert-tree > li {
    padding-left: 5px; /* Less left padding as no horizontal line needed */
}
.cert-tree > li::before {
    display: none; /* Root items don't get a horizontal line */
}

/* If a root LI has children (a UL), its vertical line needs adjustment */
.cert-tree > li > ul::before {
    left: -13px; /* Position relative to the root LI's padding */
}


/* Section Titles styling */
.cert-section-title {
    font-weight: 600;
    font-family: 'Inter', sans-serif; /* More readable font for titles */
    font-size: 1.0em; /* Slightly larger */
    color: var(--text-primary);
    margin: 10px 0 8px -15px; /* Negative margin to align with item text */
    padding: 6px 12px;
    background-color: var(--bg-secondary); /* Subtle background */
    border-radius: 8px; /* Rounded corners */
    display: inline-block; /* To fit content */
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-sm);
}
body.light-theme .cert-section-title {
    background-color: var(--gray-100);
    border-color: var(--gray-200);
    color: var(--gray-800);
}
body.gold-theme .cert-section-title {
    background-color: rgba(255,255,255,0.08);
    border-color: rgba(255,215,0,0.3);
    color: var(--gold-light);
}

/* Labels for certificate fields */
.cert-label {
    font-weight: 500;
    font-family: 'Inter', sans-serif;
    color: var(--text-secondary);
    margin-right: 8px;
}

/* Values for certificate fields */
.cert-value {
    color: var(--text-primary);
    word-break: break-word; /* Allow long words (like URLs) to break */
}

/* Styling for blocks of hexadecimal data */
.cert-value.hex-data {
    display: block; /* Take full width */
    margin-top: 6px;
    padding: 10px 15px;
    background-color: rgba(0,0,0,0.2); /* Darker background for hex */
    border-radius: 10px; /* More pronounced rounding */
    white-space: pre-wrap; /* Preserve formatting of hex data */
    font-size: 0.9em; /* Slightly smaller for dense data */
    border: 1px solid rgba(255,255,255,0.05);
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.3); /* Inner shadow for depth */
}
body.light-theme .cert-value.hex-data {
    background-color: var(--gray-50);
    border-color: var(--gray-200);
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
    color: var(--gray-700);
}
body.gold-theme .cert-value.hex-data {
    background-color: rgba(0,0,0,0.15);
    border-color: rgba(255,215,0,0.15);
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
    color: var(--gold-light);
}


/* Styling for standalone sections (those not part of a main titled section) */
.cert-standalone {
    margin-top: 18px;
    padding-top: 12px;
    border-top: 1px dashed var(--border-color);
}
.cert-standalone .cert-label {
    font-family: 'Inter', sans-serif;
}
.action {
    display: flex;
    flex-direction: column;  /* Stack buttons vertically */
    align-items: center;     /* Center all children horizontally */
    gap: 12px;               /* Space between buttons */
}

.security-note-button {
    width: fit-content;
    margin: 0;               /* Reset margin if any */
}
.feature-icon.apple-logo {
  font-family: 'Apple Symbols', 'Segoe UI Symbol', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI', sans-serif;
  /* the first font should have the Apple logo */
  /* fallback fonts may not have it */
  font-size: 2em;
  /* optionally add fallback content with ::after */
  position: relative;
}

/* fallback content if apple logo not available */
.feature-icon.apple-logo::after {
  content: 'ð§';
  position: absolute;
  top: 0;
  left: 0;
  font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI', sans-serif;
  font-size: 2em;
  opacity: 0;
  pointer-events: none;
}

/* Hide fallback if the apple logo renders */
/* Trick: Use font-feature-settings or a font-test with JS or CSS @supports, but CSS alone can't detect missing glyphs */
/* So better to use JS for accurate fallback */

/* Optional JS fallback */

    </style>
</head>
<body>
    <div class="bg-decoration">
        <div class="floating-orb orb-1"></div>
        <div class="floating-orb orb-2"></div>
        <div class="floating-orb orb-3"></div>
        <div class="floating-orb orb-4"></div>
    </div>

    <div class="top-bar">
        <div class="user-profile-dropdown" id="userProfileDropdown">
            <div class="user-profile-header">
                <strong id="profileUsername">Player</strong>
                <span id="profileStatus">Status: Verified (Mock)</span>
            </div>
            <ul>
                <li><a href="#" id="profileSettingsLink"><i class="fas fa-cog"></i> Preferences</a></li>
                <li><a href="#" id="profileActivityLink"><i class="fas fa-history"></i> My Activity (Mock)</a></li>
                <li><a href="#" id="profileLogoutLink"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
            </ul>
        </div>
        <button class="icon-button" id="settingsModalToggle" aria-label="Open Settings" title="Open Settings">
            <i class="fas fa-cogs"></i>
        </button>
    </div>

    <div class="main-container">
        <div class="card">
            <div class="header">
                <div class="logo">FLGC DEMO BETA - DO NOT DISTRIBUTE</div>
                <div class="tagline" id="welcomeMessage">Spin for Unreal Luxury - Powered by Bitflash</div>
                <div class="live-indicator">
                    <div class="live-dot"></div>
                    <span id="playersOnline">118,521</span> players online
                </div>
            </div>

            <div class="stats">
                <div class="stat"><div class="stat-number">5M+</div><div class="stat-label">Winners Monthly</div></div>
                <div class="stat"><div class="stat-number">$32B+</div><div class="stat-label">In Jackpots Given</div></div>
                <div class="stat">
                    <div class="stat-number" id="user-rating-stat">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">User Rating</div>
                </div>
            </div>
            
            
            <div class="promo-banner" id="promoBanner"> <p><strong id="promoText">ð Sign Up Today & Get 5 FREE SPINS! Start your luxury journey now!</strong></p>
                <button class="promo-banner-close" id="promoBannerClose" aria-label="Close promotion">&times;</button>
            </div>

              <div class="features">
                <div class="features-grid">
                    <div class="feature" data-modal="rewardsModal" tabindex="0" role="button" aria-haspopup="dialog">
                        <div class="feature-icon">ð</div><div class="feature-title">Exclusive Prizes</div><div class="feature-desc">Win from 5000+ Exclusive Prizes.</div>
                    </div>
                    <div class="feature" data-modal="gamesModal" tabindex="0" role="button" aria-haspopup="dialog">
                        <div class="feature-icon">ð°</div><div class="feature-title">Exciting Games</div><div class="feature-desc">Slots, Wheel, Crash, Plinko & More!</div>
                    </div>
                    <div class="feature" data-modal="accessModal" tabindex="0" role="button" aria-haspopup="dialog">
                        <div class="feature-icon">â¡</div><div class="feature-title">Instant Play</div><div class="feature-desc">Get 5 Free Spins on Signup!</div>
                    </div>
<div class="feature" data-modal="uptimeModal" tabindex="0" role="button" aria-haspopup="dialog">
    <div class="feature-icon">ð</div>
    <div class="feature-title">Always Available</div>
    <div class="feature-desc">100% uptime guarantee, including Offline Play.</div>
</div>
<div class="feature" data-modal="appleSiliconModal" tabindex="0" role="button" aria-haspopup="dialog">
  <div class="feature-icon" aria-label="Apple logo or wrench emoji"></div>
  <div class="feature-title">Optimized for Apple Silicon</div>
  <div class="feature-desc">Runs natively across all Apple chips â Mac, iPhone & iPad.</div>
</div>

<script>
  function isAppleDevice() {
    return /Mac|iPhone|iPad|iPod/.test(navigator.userAgent) && !window.MSStream;
  }

  document.addEventListener('DOMContentLoaded', () => {
    const icon = document.querySelector('.feature-icon');
    if (!icon) return;

    if (isAppleDevice()) {
      icon.textContent = 'ï£¿';  // Apple logo U+F8FF
    } else {
      icon.textContent = 'ð§';  // wrench emoji fallback
    }
  });
</script>

<style>
  .feature-icon {
    font-size: 2em;
  }
</style>
<div class="feature" data-modal="webAppModal" tabindex="0" role="button" aria-haspopup="dialog">
    <div class="feature-icon">ð²</div>
    <div class="feature-title">Web App Experience</div>
    <div class="feature-desc">Unlock full offline support and smoother gameplay.</div>
</div>
<div class="feature wide" data-modal="flgcCardModal" tabindex="0" role="button" aria-haspopup="dialog">
    <div class="feature-icon">ð³</div>
    <div>
        <div class="feature-title">FLGC Card</div>
        <div class="feature-desc">Instant login with a tap â no typing, no remembering.</div>
    </div>
</div>
                </div>
            </div>

            <div class="action">
                <button class="main-button" id="continueButton">
                    <i class="fas fa-arrow-right"></i> Continue to Casino
                </button>
<div style="display: flex; align-items: center; gap: 10px;">
    <button class="security-note-button" id="securityNoteButton" aria-label="">
        <i class="fas fa-lock"></i> Secured & Verified Platform
    </button>

    <span style="font-weight: bold; color: #888;">|</span>

    <button class="security-note-button" onclick="window.location.href='https://feedback.flgc.fwh.is/index.php'" aria-label="Leave a review">
        <i class="fas fa-comment-dots"></i> Leave a Review
    </button>
</div>

            </div>
        </div>
        
        <div class="did-you-know-tip" id="didYouKnowTip">
            <strong>Did You Know?</strong> <span id="tipText">FLGC is independently developed in Southern Finland by Bitflash Enterprises.</span>
        </div>
    </div>

    <footer class="site-footer">
        <div class="footer-extra-buttons" style="margin-bottom: 15px;">
            <button id="feedbackBtn"><i class="fas fa-comment-dots"></i> Support</button>
            <button id="faqBtn"><i class="fas fa-question-circle"></i> Quick Tips/FAQ</button>
            <button id="shareBtn"><i class="fas fa-share-alt"></i> Share FLGC</button>
        </div>
        <div class="footer-links">
            <a href="#" id="termsLink">Terms of Service & Privacy Policy</a>
        </div>
        </div>
        <p>â </p>
                    <p>APP ID: flgc-landing-v5.6.3.4</p>
    </footer>

    <div id="rewardsModal" class="modal" aria-labelledby="rewardsModalTitle" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true">
            <div class="modal-header">
                <h3 id="rewardsModalTitle" class="modal-title">ð Exclusive Prizes & Rewards</h3>
                <button class="modal-close" aria-label="Close rewards modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Welcome to the FLGC Rewards Program! Every spin and win brings you closer to incredible prizes. New players automatically receive <strong>5 FREE SPINS</strong> to kickstart their journey!</p>
                <p><strong>Prize Pool Includes:</strong></p>
                <ul>
                    <li>Luxury Cars (e.g., Lamborghini Aventador)</li>
                    <li>High-Value Cash Prizes (e.g., $10M Cash)</li>
                    <li>Exclusive Tech (e.g., Private Jets, Gold-Plated Teslas)</li>
                    <li>Bitflash Bucks & Bonus Spins</li>
                    <li>And over 5000+ other unique items!</li>
                </ul>
<p>Win Bitflash Bucks and Spins regularly. Fill your Jackpot Progress bar to spin the Jackpot Wheel for rewards up to 50,000 Bitflash Bucks!</p>
<p>Join our exclusive VIP Program and unlock even more benefits! With three exciting levels â you'll enjoy perks like discounted store items, increased rewards, and ad-free gameplay. The higher your tier, the better the perks!</p>
            </div>
            <div class="modal-footer">
                <button class="modal-button modal-close">Awesome!</button>
            </div>
        </div>
    </div>

    <div id="gamesModal" class="modal" aria-labelledby="gamesModalTitle" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true">
            <div class="modal-header">
                <h3 id="gamesModalTitle" class="modal-title">ð° Our Luxury Game Selection</h3>
                <button class="modal-close" aria-label="Close games modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>FLGC offers a thrilling suite of high-end casino games, each with unique prize opportunities:</p>
                <ul>
                    <li><strong>Classic Slots:</strong> Spin the reels for a chance to win from a vast array of luxury and illicit-themed prizes. Match Prizes to win Prizes, Bitflash Bucks and bonus spins.</li>
                    <li><strong>Prize Wheel:</strong> A classic wheel of fortune where every segment holds a surprise. Spin for instant prizes using shared Slots spins.</li>
                    <li><strong>Crypto Crash:</strong> Test your nerve in this high-stakes game. Watch the multiplier climb, but cash out before it crashes to secure your winnings!</li>
                    <li><strong>Plinko Drop:</strong> Drop balls down a pegged board and watch them land in multiplier slots. Strategy and luck combine for exciting payouts.</li>
                    <li><strong>Classic Blackjack:</strong> Aim for 21 against the dealer. Features standard Blackjack rules with Bitflash payouts.</li>
                    <li><strong>Bitflash Roulette:</strong> Bet on your lucky colors in our custom Roulette game.</li>
                    <li><strong>Jackpot Wheel:</strong> Triggered by filling your Jackpot Progress bar, this special wheel offers up to 50,000 Bitflash Bucks.</li>
                </ul>
                <p>All games are powered by Bitflash, ensuring a unique and exciting experience. Remember, new players get <strong>5 FREE SPINS</strong> to start!</p>
            </div>
            <div class="modal-footer">
                <button class="modal-button modal-close">Let's Play!</button>
            </div>
        </div>
    </div>

     <div id="accessModal" class="modal" aria-labelledby="accessModalTitle" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true">
            <div class="modal-header">
                <h3 id="accessModalTitle" class="modal-title">â¡ Instant Play & Free Spins!</h3>
                <button class="modal-close" aria-label="Close access modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Jump straight into the action at FLGC! We offer instant access with no lengthy sign-ups. Best of all, new players are welcomed with <strong>5 FREE SPINS</strong> on Slots/Wheel to get started immediately!</p>
                <p>Our platform ensures:
                    <ul>
                        <li><strong>Quick Start:</strong> Begin playing in moments.</li>
                        <li><strong>5 Free Spins:</strong> Awarded automatically to new accounts.</li>
                        <li><strong>No Downloads:</strong> Play directly in your browser.</li>
                        <li><strong>Optimized Performance:</strong> Smooth gameplay on all devices.</li>
                    </ul>
                </p>
                <p>Use your free spins on our exciting games and start your journey towards luxury prizes!</p>
            </div>
            <div class="modal-footer">
                <button class="modal-button modal-close">Got It!</button>
            </div>
        </div>
    </div>
<div id="appleSiliconModal" class="modal" aria-labelledby="appleSiliconModalTitle" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true">
        <div class="modal-header">
            <h3 id="appleSiliconModalTitle">ð Optimized for Apple Silicon</h3>
            <button class="modal-close" aria-label="Close Apple Silicon modal">&times;</button>
        </div>
        <div class="modal-body">
            <p>Experience seamless performance across the Apple ecosystem, with full native support for both desktop and mobile devices powered by Apple Silicon.</p>
            <ul>
                <li><strong>Universal Optimization:</strong> Runs natively on Apple Silicon Macs (M-series) and iPhones/iPads (A-series), ensuring smooth performance on every device.</li>
                <li><strong>No Emulation:</strong> No translation layers or compatibility issues â everything runs directly on the chip for faster load times and lower resource usage.</li>
                <li><strong>Battery Smart:</strong> Built with Appleâs power-efficient architecture in mind, preserving battery life across devices without sacrificing performance.</li>
                <li><strong>One Codebase, Full Compatibility:</strong> A single universal build works fluidly across macOS, iOS, and iPadOS with optimized UI and hardware support.</li>
            </ul>
            <p>From high-performance gaming on your Mac to smooth touch-based interactions on iPhone and iPad â it's all built to feel native, fast, and fluid.</p>
        </div>
        <div class="modal-footer">
            <button class="modal-button modal-close">Understood!</button>
        </div>
    </div>
</div>

<div id="webAppModal" class="modal" aria-labelledby="webAppModalTitle" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true">
        <div class="modal-header">
            <h3 id="webAppModalTitle">ð² Web App Experience</h3>
            <button class="modal-close" aria-label="Close Web App modal">&times;</button>
        </div>
        <div class="modal-body">
            <p>For the fastest, smoothest way to play, use FLGC as a standalone web app â fully optimized for Apple Silicon devices only.</p>
            <ul>
                <li><strong>Offline Support:</strong> Once installed, FLGC works fully offline â no connection needed.</li>
                <li><strong>Performance Boost:</strong> Launches faster and runs smoother than in Safari or Chrome tabs.</li>
                <li><strong>Immersive Experience:</strong> Full-screen, no browser UI, just pure gameplay.</li>
                <li><strong>Feels Native:</strong> Just like a real app, right from your Home Screen or Dock.</li>
            </ul>

            <p><strong>How to install on Safari:</strong></p>
            <ul>
                <li><strong>iPhone / iPad:</strong> Tap the <strong>Share</strong> icon in Safari, then choose <em>âAdd to Home Screen.â</em></li>
                <li><strong>Mac:</strong> Tap the <strong>Share</strong> button in Safariâs toolbar, then choose <em>âAdd to Dock.â</em></li>
            </ul>

            <hr>

            <p><strong>Not on Apple Silicon?</strong><br>
            FLGC still runs great in Chrome on Windows, and may partially work as a web app on some Android devices â though performance and offline support may vary.</p>
        </div>
        <div class="modal-footer">
            <button class="modal-button modal-close">Got it!</button>
        </div>
    </div>
</div>

<div id="flgcCardModal" class="modal" aria-labelledby="flgcCardModalTitle" aria-hidden="true">
  <div class="modal-content" role="dialog" aria-modal="true">
    <div class="modal-header">
      <h3 id="flgcCardModalTitle">ð³ FLGC Card</h3>
      <button class="modal-close" aria-label="Close FLGC Card modal">&times;</button>
    </div>
    <div class="modal-body">
      <p>The FLGC Card is a physical NFC tag linked to your account. Just tap it â and you're ready to login.</p>

      <ul class="mt-4 space-y-2">
        <li><strong>Auto-Copy & Launch:</strong> Tap the card and your unique Card ID is automatically copied to your device <em>and</em> the FLGC App opens instantly â no memorization or searching needed.</li>
        <li><strong>Always With You:</strong> Fits in your wallet or on your keys, giving you fast access to FLGC wherever you are.</li>
        <li><strong>Quick Launch:</strong> Tap the card to trigger a custom Apple Shortcut connected to your account.</li>
      </ul>

      <p class="mt-4"><strong>Requirements:</strong></p>
      <ul class="list-disc ml-5">
        <li>Apple iPhone X or later</li>
        <li>Apple Shortcuts app</li>
        <li>Any NFC tag</li>
        <li>FLGC App</li>
      </ul>

      <p class="mt-4 text-red-600 font-semibold">Not compatible with Android or older iPhones.</p>

      <p class="mt-6">Ready to set up your card? <a href="https://card.flgc.xyz" class="text-indigo-600 underline font-semibold">Start here</a>.</p>

      <p class="mt-4">Need help? Visit <a href="https://cs.flgc.xyz/" class="text-indigo-600 underline">cs.flgc.xyz</a>.</p>
    </div>
    <div class="modal-footer">
      <button class="modal-button modal-close">Got it!</button>
    </div>
  </div>
</div>

<div id="uptimeModal" class="modal" aria-labelledby="uptimeModalTitle" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true">
        <div class="modal-header">
            <h3 id="uptimeModalTitle" class="modal-title">ð Secure & Reliable</h3>
            <button class="modal-close" aria-label="Close uptime modal">&times;</button>
        </div>
        <div class="modal-body">
            <p>Your trust and security are our top priorities. We employ state-of-the-art security measures to ensure a safe and transparent gaming environment.</p>
            <ul>
                <li><strong>Advanced Security:</strong> SSL encryption protects all your data. Our systems are regularly audited for vulnerabilities.</li>
                <li><strong>Guaranteed 100% Uptime:</strong> Our robust infrastructure and redundant server systems ensure that the casino is always available when you want to play. Say goodbye to frustrating downtime.</li>
                <li><strong>Offline Mode Available:</strong> Access the platform through our web app even without an internet connection in Offline Guest Mode, ensuring uninterrupted gameplay anytime, anywhere.</li>
                <li><strong>Data Privacy:</strong> We are committed to protecting your personal information in accordance with our policies.</li>
            </ul>
            <p>Play with confidence, knowing you're in a secure and reliable environment whether online or offline.</p>
        </div>
        <div class="modal-footer">
            <button class="modal-button modal-close">Understood!</button>
        </div>
    </div>
</div>

<div id="settingsModal" class="modal settings-modal" aria-labelledby="settingsModalTitle" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true">
        <div class="modal-header">
            <h3 id="settingsModalTitle" class="modal-title"><i class="fas fa-cog"></i> Site Settings</h3>
            <button class="modal-close" aria-label="Close settings modal">Ã</button>
        </div>
        <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
            <div class="settings-section">
                <h4><i class="fas fa-palette"></i> Appearance</h4>
                <div class="settings-option">
                    <label>Theme: <span style="color: red; font-weight: bold; margin-left: 8px;">(Beta)</span></label>
                    <div class="radio-group" id="themeSelector">
                        <input type="radio" id="themeDark" name="theme" value="dark" checked><label for="themeDark">Dark</label>
                        <input type="radio" id="themeLight" name="theme" value="light"><label for="themeLight">Light</label>
                        <input type="radio" id="themeGold" name="theme" value="gold"><label for="themeGold">Gold</label>
                    </div>
                </div>
                <div class="settings-option">
                    <label for="fontSizeSelect">Font Size:</label>
                    <select id="fontSizeSelect">
                        <option value="normal">Normal</option>
                        <option value="large">Large</option>
                        <option value="xlarge">X-Large</option>
                    </select>
                </div>
            </div>
            <div class="settings-section">
                <div class="settings-option">
                    <label>Clear Local Preferences:</label>
                    <button id="clearPreferencesBtn" class="modal-button secondary" style="font-size: 0.9em; padding: 6px 12px;">Clear Now</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Add event listener for the Check for Updates button
    document.getElementById('checkUpdatesBtn').addEventListener('click', async () => {
        // Check if the browser is online
        if (!navigator.onLine) {
            alert('You are offline. Please connect to the internet and try again.');
            return;
        }

        try {
            // Check if service worker is supported
            if ('serviceWorker' in navigator) {
                // Send message to service worker to clear cache
                const registration = await navigator.serviceWorker.ready;
                if (registration.active) {
                    registration.active.postMessage({ action: 'clearCache' });

                    // Listen for cache cleared message
                    navigator.serviceWorker.addEventListener('message', (event) => {
                        if (event.data.action === 'cacheCleared') {
                            // Reload the page to fetch new content
                            window.location.reload(true);
                        }
                    });
                }
            } else {
                // Fallback for browsers without service worker support
                caches.delete('flgc-cache-v1725').then(() => {
                    window.location.reload(true);
                });
            }
        } catch (error) {
            console.error('Error clearing cache:', error);
            alert('Failed to check for updates. Please try again later.');
        }
    });
</script>

    <div id="versionWarningModal" class="modal" aria-labelledby="versionWarningModalTitle" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true">
            <div class="modal-header">
                <h3 id="versionWarningModalTitle" class="modal-title"><i class="fas fa-exclamation-triangle" style="color:var(--red);"></i> Version Warning</h3>
                <button class="modal-close" aria-label="Close version warning modal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="versionWarningText">You are about to proceed to an older or experimental version of the casino. Some features may be unavailable, unstable, or different from the latest experience. Proceed with caution.</p>
            </div>
            <div class="modal-footer">
                <button class="modal-button secondary modal-close">Cancel</button>
                <button class="modal-button" id="confirmRedirectButton">Proceed Anyway</button>
            </div>
        </div>
    </div>

    <div id="genericModal" class="modal" aria-labelledby="genericModalTitle" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true">
            <div class="modal-header">
                <h3 id="genericModalTitle" class="modal-title">Information</h3>
                <button class="modal-close" aria-label="Close modal">&times;</button>
            </div>
            <div class="modal-body" id="genericModalBody">
                <p>Generic content will appear here.</p>
            </div>
        </div>
    </div>
     <div id="feedbackModal" class="modal" aria-labelledby="feedbackModalTitle" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true">
            <div class="modal-header">
                <h3 id="feedbackModalTitle" class="modal-title"><i class="fas fa-comment-dots"></i> Send Us Your Feedback</h3>
                <button class="modal-close" aria-label="Close feedback modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>We value your input! Please let us know your thoughts, suggestions, or any issues you've encountered.</p>
                <div class="settings-option" style="flex-direction: column; align-items: flex-start;">
                    <label for="feedbackCategory" style="margin-bottom: 5px;">Category:</label>
                    <select id="feedbackCategory" class="mock-input" style="width:100%; margin-bottom:15px;">
                        <option value="general">General Feedback</option>
                        <option value="bug">Bug Report</option>
                        <option value="suggestion">Feature Suggestion</option>
                        <option value="compliment">Compliment</option>
                    </select>
                </div>
                <textarea id="feedbackTextarea" rows="5" style="width: 100%; padding: 10px; border-radius: var(--border-radius); border: 1px solid var(--border-color); background: var(--gray-700); color: var(--white); font-family: 'Inter', sans-serif; margin-bottom:15px;" placeholder="Type your feedback here..."></textarea>
                <div id="feedbackResponse" style="font-size:0.9em; color: var(--green); margin-top:10px;"></div>
            </div>
            <div class="modal-footer">
                <button class="modal-button secondary modal-close">Cancel</button>
                <button class="modal-button" id="submitFeedbackBtn">Submit Feedback</button>
            </div>
        </div>
    </div>
    
    <div id="shareModal" class="modal" aria-labelledby="shareModalTitle" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true">
            <div class="modal-header">
                <h3 id="shareModalTitle" class="modal-title"><i class="fas fa-share-alt"></i> Share FLGC with Friends!</h3>
                <button class="modal-close" aria-label="Close share modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Spread the word about Free Luxury Giveaway Casino and let your friends join the fun! New players get 5 Free Spins!</p>
                <div style="display: flex; justify-content: space-around; margin: 20px 0;">
                </div>
                <input type="text" id="shareLinkInput" value="https://flgc.xyz/" readonly style="width: 100%; padding: 10px; border-radius: var(--border-radius); border: 1px solid var(--border-color); background: var(--gray-700); color: var(--white); margin-bottom:10px;">
                <button id="copyShareLinkBtn" class="modal-button" style="width:100%;">Copy Link</button>
                <div id="copyLinkFeedback" style="font-size:0.9em; color: var(--green); margin-top:10px; text-align:center;"></div>
            </div>
        </div>
    </div>

<div id="certificateInfoModal" class="modal" aria-labelledby="certificateInfoModalTitle" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true">
        <div class="modal-header">
            <h3 id="certificateInfoModalTitle" class="modal-title"><i class="fas fa-shield-alt"></i> FLGC Certificate</h3>
            <button class="modal-close" aria-label="Close certificate info modal">&times;</button>
        </div>
        <div class="modal-body">
            <ul class="cert-tree">
                <li>
                    <span class="cert-section-title">Certificate</span>
                    <ul>
                        <li><span class="cert-label">Version:</span> <span class="cert-value">3</span></li>
                        <li><span class="cert-label">Serial Number:</span> <span class="cert-value">42:85:5B:25:85:54:0B:13:CE:C5:E3:86:B0:A7:BF:25</span></li>
                        <li><span class="cert-label">Signature Algorithm:</span> <span class="cert-value">PKCS #1 SHA-384 With RSA Encryption</span></li>
                        <li>
                            <span class="cert-label">Issuer:</span>
                            <ul>
                                <li><span class="cert-label">CN:</span> <span class="cert-value">ZeroSSL RSA Domain Secure Site CA</span></li>
                                <li><span class="cert-label">O:</span> <span class="cert-value">ZeroSSL</span></li>
                                <li><span class="cert-label">C:</span> <span class="cert-value">AT</span></li>
                            </ul>
                        </li>
                        <li>
                            <span class="cert-label">Validity</span>
                            <ul>
                                <li><span class="cert-label">Not Before:</span> <span class="cert-value">Wed Jun 25 2025 03:00:00 GMT+0300 (Eastern European Summer Time)</span></li>
                                <li><span class="cert-label">Not After:</span> <span class="cert-value">Tue Sep 24 2025 02:59:59 GMT+0300 (Eastern European Summer Time)</span></li>
                            </ul>
                        </li>
                        <li class="cert-standalone">
                            <span class="cert-label">Subject:</span> <span class="cert-value">CN = flgc.xyz</span>
                        </li>
                    </ul>
                </li>
                <li>
                    <span class="cert-section-title">Subject Public Key Info</span>
                    <ul>
                        <li><span class="cert-label">Algorithm:</span> <span class="cert-value">PKCS #1 RSA Encryption</span></li>
                        <li><span class="cert-label">Public Key:</span> <span class="cert-value hex-data">88 FF 42 AA C2 EB 42 7F 7E D4 E2 32 18 01 0E 7A 04 A5 08 C1 E6 23 46 19 D3 CB 03 60 42 F9 2F FF 55 48 98 70 A8 DD 3F 96 8C 36 05 7D C3 FC A0 89 6A B8 22 A7 BD 40 D1 E9 0E B2 89 A7 A6 CE AE D1 3B 18 BF F0 28 E1 1D 01 A9 40 9B 99 DC E7 16 AB D0 F1 5B DA 8F 13 E5 5D F9 3C CC 35 E1 7C 20 86 20 84 9F 04 9D DE B3 F7 B6 32 10 93 AA D2 64 D9 17 3C 45 8B 3D C8 3C 23 4F 85 1B 11 49 F6 6C 0D B0 96 30 D2 A9 33 A1 72 D9 D7 B7 21 A3 91 F8 83 26 73 6D EA 0C 73 61 E3 68 54 E4 88 87 67 C1 96 EB 78 C7 A2 54 D3 B2 E4 D8 98 37 5C 87 0C EC 3F 7C 20 AB 61 0A 62 CC DE C4 5C 69 6F 98 C3 56 4F 3C F2 88 53 01 5D 58 CA CE 9A 67 F0 4A 8C 4C 32 36 00 75 E3 2E DA 33 90 30 9F C1 41 03 DD 6D 43 5A 94 3F A2 DB 55 46 93 9C 40 8B D7 31 A6 3F 16 89 18 D3 98 83 47 34 8C 50 0C BA 8A 9D 2D D8 73</span></li>
                        <li><span class="cert-label">Public Exponent:</span> <span class="cert-value hex-data">01 00 01</span></li>
                    </ul>
                </li>
                <li>
                    <span class="cert-section-title">Extensions</span>
                    <ul>
                        <li>
                            <span class="cert-label">Authority Key ID:</span>
                            <ul>
                                <li><span class="cert-value">Not Critical</span></li>
                                <li><span class="cert-label">Key ID:</span> <span class="cert-value hex-data">C8 D9 78 68 A2 D9 19 68 D5 3D 72 DE 5F 0A 3E DC B5 86 86 A6</span></li>
                            </ul>
                        </li>
                        <li>
                            <span class="cert-label">Subject Key ID:</span>
                            <ul>
                                <li><span class="cert-value">Not Critical</span></li>
                                <li><span class="cert-label">Key ID:</span> <span class="cert-value hex-data">14 3D D2 77 86 41 E9 8E 51 09 00 16 83 83 5B AE 3A 42 84 A3</span></li>
                            </ul>
                        </li>
                        <li>
                            <span class="cert-label">Key Usage:</span>
                            <ul>
                                <li><span class="cert-value">Critical</span></li>
                                <li><span class="cert-value">Signing</span></li>
                                <li><span class="cert-value">Key Encipherment</span></li>
                            </ul>
                        </li>
                        <li>
                            <span class="cert-label">Basic Constraints:</span>
                            <ul>
                                <li><span class="cert-value">Critical</span></li>
                                <li><span class="cert-value">Is not a Certification Authority</span></li>
                            </ul>
                        </li>
                        <li>
                            <span class="cert-label">Extended Key Usage:</span>
                            <ul>
                                <li><span class="cert-value">Not Critical</span></li>
                                <li><span class="cert-value">TLS WWW Server Authentication (OID.1.3.6.1.5.5.7.3.1)</span></li>
                                <li><span class="cert-value">TLS WWW Client Authentication (OID.1.3.6.1.5.5.7.3.2)</span></li>
                            </ul>
                        </li>
                        <li>
                            <span class="cert-label">Certificate Policies:</span>
                            <ul>
                                <li><span class="cert-value">Not Critical</span></li>
                                <li><span class="cert-label">OID:</span> <span class="cert-value">1.3.6.1.4.1.6449.1.2.2.78</span>
                                    <ul>
                                        <li><span class="cert-label">Certification Practice Statement Pointer:</span> <span class="cert-value"><a href="https://sectigo.com/CPS" target="_blank" rel="noopener noreferrer">https://sectigo.com/CPS</a></span></li>
                                    </ul>
                                </li>
                                <li><span class="cert-label">OID:</span> <span class="cert-value">2.23.140.1.2.1</span></li>
                            </ul>
                        </li>
                        <li>
                            <span class="cert-label">Authority Information Access:</span>
                            <ul>
                                <li><span class="cert-value">Not Critical</span></li>
                                <li><span class="cert-label">CA Issuers:</span> <span class="cert-value">URI: <a href="http://zerossl.crt.sectigo.com/ZeroSSLRSADomainSecureSiteCA.crt" target="_blank" rel="noopener noreferrer">http://zerossl.crt.sectigo.com/ZeroSSLRSADomainSecureSiteCA.crt</a></span></li>
                                <li><span class="cert-label">OCSP Responder:</span> <span class="cert-value">URI: <a href="http://zerossl.ocsp.sectigo.com" target="_blank" rel="noopener noreferrer">http://zerossl.ocsp.sectigo.com</a></span></li>
                            </ul>
                        </li>
                        <li>
                            <span class="cert-label">Subject Alternative Name:</span>
                            <ul>
                                <li><span class="cert-value">Not Critical</span></li>
                                <li><span class="cert-label">DNS Name:</span> <span class="cert-value">flgc.xyz</span></li>
                                <li><span class="cert-label">DNS Name:</span> <span class="cert-value">www.flgc.xyz</span></li>
                            </ul>
                        </li>
                        <li>
                            <span class="cert-label">Signed Certificate Timestamp List:</span>
                            <ul>
                                <li><span class="cert-value">Not Critical</span></li>
                                <li><span class="cert-value hex-data">04 81 F3 00 F1 00 76 00 DD DC CA 34 95 D7 E1 16 05 E7 95 32 FA C7 9F F8 3D 1C 50 DF DB 00 3A 14 12 76 0A 2C AC BB C8 2A 00 00 01 97 A8 1B 98 9B 00 00 04 03 00 47 30 45 02 20 66 BA 39 25 32 68 83 48 26 45 CC CE D6 74 23 93 A2 AE 1B A1 3B 6D 33 93 C6 26 E6 01 26 38 F0 24 02 21 00 D1 95 E9 E6 04 62 63 A0 D1 97 63 EA B3 B0 4E 83 86 3B 13 30 EE 93 9E B6 4D 74 E4 5D 45 F1 77 39 00 77 00 0D E1 F2 30 2B D3 0D C1 40 62 12 09 EA 55 2E FC 47 74 7C B1 D7 E9 30 EF 0E 42 1E B4 7E 4E AA 34 00 00 01 97 A8 1B 98 73 00 00 04 03 00 48 30 46 02 21 00 88 DC 6E 9F 97 83 39 B7 52 B2 6D 7B E3 E1 CD 5D 35 F0 96 FF 78 3F CA D8 5B EE 9A AD 2B 27 34 4B 02 21 00 D8 B5 15 A2 1B 95 E7 66 D4 B0 DC BB 19 2F BA 72 0E DE E9 52 3C 20 86 D5 8A 60 9F 46 90 DB 03 69</span></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="cert-standalone">
                    <span class="cert-label">Certificate Signature Algorithm:</span> <span class="cert-value">PKCS #1 SHA-384 With RSA Encryption</span>
                </li>
                <li class="cert-standalone">
                    <span class="cert-label">Certificate Signature Value:</span> <span class="cert-value hex-data">67 E2 B0 04 FA 5F 2B 2A 9E 54 E1 48 B0 4B 8A 2B 97 CC 12 0D EA 88 A8 0E CB 6B 2A AC 4E A2 5C 3E 59 02 76 31 A1 3F 7F 7C 5A 28 45 18 A3 41 1F BA F0 94 87 A2 E7 E6 8C D5 0A A1 1D 18 D3 4C 5B 46 D7 BF 24 3C 73 2F 3D 42 36 C4 81 5A FA F6 67 7B 9A 5B 98 62 83 65 58 C7 17 2F 93 0D 77 62 74 67 D1 31 EB C8 61 33 EA CE 9E 67 28 96 2D A2 B2 19 71 17 81 5A 68 C6 F2 CD 00 59 EB D9 FF 3D 95 EC 45 6E 79 96 69 56 31 6F D4 23 F0 7C 42 37 8D 8D D3 57 6E 1C 72 AD 7B 64 E4 6A 2A F9 3C 24 4E FE 71 4F D9 B5 1B E7 0B 12 04 91 CE 42 82 AD 4E A4 1D B1 8C FC DC 8C DE 4B D4 06 8F A4 43 A8 CE 5A EA 52 74 95 8B 6F F3 C6 D7 A9 46 D0 AB F8 6C 5A 06 89 AE 85 A6 23 AB 10 C6 FE F0 5A 39 DE 9D BC 79 4A F4 E0 8A 6F 34 99 8E 3D 68 AB 20 5B 51 FE 27 31 32 D6 AB F0 80 24 32 3D 22 D4 7D 98 F2 83 78 94 4F 53 C7 35 2C 68 5A 8D 94 E7 94 1B 88 5D CB 21 00 3B FF D8 35 CB BE C0 AE C6 CA 28 9B DD 30 F6 AC 04 2A 88 3B 17 78 A7 51 D9 F9 E8 03 D0 5B BB 0D 97 C7 42 DF AC 88 42 9A D2 13 21 3F 3B 18 30 F4 9E B7 BD F2 93 88 48 F4 78 26 22 FD F6 B6 93 CD FD A9 9E 83 9D 29 7B D5 C6 59 83 F1 66 FF 25 1C 5D B4 9C 37 09 07 18 BE 3F C5 26 11 C4 49 3A F7 46 F3 C0 42 95 C4 45 32 6B 3D 97 B2 C1 A3 F5 1D 59 1D 4A 4E A4 7F 97 BE D9 6A E4 EB E9 C5 F8 B1 45 96 03 D6 9E D8 90 17 50 41 34 77 3F DC FE 69 70 09 AB B8 47 59 72 6B 2E 43 AB 94 2A 01 A3 C5 8E 84 29 C4 0B 68 12 86 25 ED AE 0A 9F 9F AA 08 4A 97 EB 07 96 27 46 31 A8 DC 8E 94 C2 4F 29 EB 31 67 A3 14 F9 57 CD C5 A5 75 11 80 34 97 70 D1 24 3A FA 87 8A 67 CB B5 45 C9 0A 02 76 18 1D BF 72 C7 BB F7 38 FE 93 0D F9 31 80 B2 02</span>
                </li>
                <li>
                    <span class="cert-section-title">SHA-256 Fingerprints</span>
                    <ul>
                        <li><span class="cert-label">Certificate:</span> <span class="cert-value hex-data">7bf981060e281f84384828fe0dd3cd21bf3483086c19576374693664c96b51c1</span></li>
                        <li><span class="cert-label">Public Key:</span> <span class="cert-value hex-data">67892a278f4c51e707da2b7106ea337f625bb0983d91282103f563b2377b68fa</span></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div>

    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text" id="loadingUserText">Preparing your premium experience...</div>
        <div class="loading-progress-bar-container">
            <div class="loading-progress-bar" id="loadingProgressBar"></div>
        </div>
    </div>

    <script type="module">
        // Firebase/Firestore Configuration
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'flgc-landing-v5.4.2.1'; // Updated App ID for clarity
        const firebaseConfigFromGlobal = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
        
                const localFirebaseConfig = { 
  apiKey: "AIzaSyBTdVFjuVLtKVvdVc-wTL5Lt_ed9T_csYs",
  authDomain: "flgcproject.firebaseapp.com",
  projectId: "flgcproject",
  storageBucket: "flgcproject.firebasestorage.app",
  messagingSenderId: "530670013869",
  appId: "1:530670013869:web:bfffbf46f2112252b7e524"
};
        const finalFirebaseConfig = firebaseConfigFromGlobal || localFirebaseConfig;

        // Firebase Imports
        import { initializeApp, getApp, getApps, setLogLevel } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js';
        import { getFirestore, collection, addDoc, serverTimestamp, setDoc, doc, getDoc } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js';

        let app, db, auth, currentUserId = null, isAuthReady = false;
        let synth; // For Tone.js

        try {
            if (!getApps().length) {
                app = initializeApp(finalFirebaseConfig);
            } else {
                app = getApp();
            }
            db = getFirestore(app);
            auth = getAuth(app);
            setLogLevel('debug'); 
            updateFirestoreStatus('loading', 'Initializing...');

            onAuthStateChanged(auth, async (user) => {
                if (user) {
                    currentUserId = user.uid;
                    console.log("User is signed in with UID:", currentUserId);
                    updateFirestoreStatus('online', `OK`);
                    isAuthReady = true;
                    if (sessionManager) { 
                        sessionManager.setUserId(currentUserId); 
                        sessionManager.logSessionStart(); 
                        updateUserProfileDropdown();
                    }
                } else {
                    console.log("User is signed out. Attempting to sign in.");
                    currentUserId = null; // Explicitly set to null
                    updateUserProfileDropdown(); // Update UI for logged-out state
                    if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                        try {
                            await signInWithCustomToken(auth, __initial_auth_token);
                            console.log("Signed in with custom token.");
                        } catch (customTokenError) {
                            console.error("Custom token sign-in failed, trying anonymous:", customTokenError);
                            await signInAnonymously(auth);
                            console.log("Signed in anonymously after custom token failure.");
                        }
                    } else {
                        await signInAnonymously(auth);
                        console.log("Signed in anonymously.");
                    }
                }
                const userIdValEl = document.getElementById('userIdVal');
                if(userIdValEl) userIdValEl.textContent = currentUserId ? currentUserId : 'Anonymous';
            });

        } catch (error) {
            console.error('Firestore initialization error:', error);
            updateFirestoreStatus('error', error.message);
            db = null; 
        }
        const appIdValEl = document.getElementById('appIdVal');
        if(appIdValEl) appIdValEl.textContent = appId;

        if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/service-worker.js')
        .then(registration => {
          console.log('Service Worker registered with scope:', registration.scope);
        })
        .catch(error => {
          console.log('Service Worker registration failed:', error);
        });
    });
  }

        // Casino Version Configuration
        const casinoVersions = {
            latest: { name: "Latest Stable (v28525)", url: "http://flgc.xyz/verify", warning: false },
            classic_v2_30425: { name: "v30425", url: "https://flgcas.web.app/classic_v2_30425.html", warning: "This is a specific previous version. Some features may differ." },
            classic_v2_29425: { name: "v29425", url: "https://flgcas.web.app/classic_v2_29425.html", warning: "This is a specific previous version. Some features may differ." },
            "23525": { name: "v23525", url: "https://flgcas.web.app/23525.html", warning: "This is an older version. Features may be outdated." },
            "22525": { name: "v22525", url: "https://flgcas.web.app/22525.html", warning: "This is an older version. Features may be outdated." },
            "20525": { name: "v20525", url: "https://flgcas.web.app/20525.html", warning: "This is an older version. Features may be outdated." },
            gs19425: { name: "gsv19425", url: "https://flgcas.web.app/gs19425.html", warning: "This is a specific previous version. Some features may differ." },
            "16525": { name: "v16525 (Legacy)", url: "https://flgcas.web.app/16525.html", warning: "This is a legacy version. Expect significant differences." },
            "14525": { name: "v14525 (Legacy)", url: "https://flgcas.web.app/14525.html", warning: "This is a legacy version. Expect significant differences." },
            "12525": { name: "v12525 (Legacy)", url: "https://flgcas.web.app/12525.html", warning: "This is a legacy version. Expect significant differences." },
            "11525": { name: "v11525 (Legacy)", url: "https://flgcas.web.app/11525.html", warning: "This is a legacy version. Expect significant differences." },
            "8525": { name: "v8525 (Archived)", url: "https://flgcas.web.app/8525.html", warning: "This is an archived version. Highly outdated." },
            "7525": { name: "v7525 (Archived)", url: "https://flgcas.web.app/7525.html", warning: "This is an archived version. Highly outdated." },
            "6525": { name: "v6525 (Archived)", url: "https://flgcas.web.app/6525.html", warning: "This is an archived version. Highly outdated." },
            "5525": { name: "v5525 (Offline Capable)", url: "https://flgcas.web.app/5525.html", warning: "This version has offline capabilities but is significantly older." },
            "1525": { name: "v1525 (Earliest Public)", url: "https://flgcas.web.app/1525.html", warning: "This is one of the earliest public versions. Very limited." },
            ta0: { name: "Tech Alpha 0 (Experimental)", url: "https://flgcas.web.app/alpha.html", warning: "This is a very early developer test build. Highly unstable and not representative." },
            icon: { name: "ICON (View App Icon)", url: "https://flgcas.web.app/apple-touch-icon.png", warning: "This link shows the app icon image, not a playable version." },
            source: { name: "FLGC Source Code (View)", url: "https://view-page-source.com/flgcas.web.app/authorized.html", warning: "This will show the page source code of the latest version, not a playable game." },
            swsource: { name: "Service Worker Source (v5525)", url: "https://flgcas.web.app/service-worker.js", warning: "This shows the service worker script for v5525, not a playable game." },
        };

        let selectedCasinoVersionKey = 'latest'; 

        // Sound Effects Engine (Tone.js)
        let soundEnabled = true; 
        function initializeSound() {
            if (typeof Tone !== 'undefined') {
                synth = new Tone.Synth({
                    oscillator: { type: 'sine' },
                    envelope: { attack: 0.005, decay: 0.1, sustain: 0.05, release: 0.1 }
                }).toDestination();
                console.log("Tone.js synth initialized.");
            } else {
                console.warn("Tone.js not loaded, sound effects disabled.");
                soundEnabled = false; // Disable if Tone not found
            }
        }
        function playSound(note = 'C4', duration = '8n', type = 'ui') {
            if (soundEnabled && synth && Tone.context.state !== 'running') {
                Tone.start(); // Ensure audio context is running
            }
            if (soundEnabled && synth) {
                try {
                    if (type === 'confirm') {
                        synth.triggerAttackRelease('E5', '16n', Tone.now());
                        synth.triggerAttackRelease('G5', '16n', Tone.now() + 0.07);
                    } else if (type === 'navigate') {
                        synth.triggerAttackRelease('A4', '16n', Tone.now());
                    } else if (type === 'error') {
                        synth.triggerAttackRelease('F#3', '8n', Tone.now());
                        synth.triggerAttackRelease('F3', '8n', Tone.now() + 0.1);
                    } else { // Default UI click
                        synth.triggerAttackRelease(note, duration, Tone.now());
                    }
                } catch (e) {
                    console.warn("Error playing sound:", e);
                }
            }
        }


        // Session Management
        class SessionManager {
            constructor() {
                this.sessionId = this.generateSessionId();
                this.startTime = Date.now();
                this.interactions = 0;
                this.location = 'Unknown';
                this.pageLoads = parseInt(localStorage.getItem('flgc_pageLoads_v3') || '0') + 1;
                localStorage.setItem('flgc_pageLoads_v3', this.pageLoads.toString());
                this.userId = null; 
                this.init();
            }

            setUserId(userId) {
                this.userId = userId;
            }

            generateSessionId() {
                return `sess_${crypto.randomUUID()}`;
            }

            async init() {
                try {
                    const response = await fetch('https://ipapi.co/json/');
                    if (!response.ok) throw new Error(`IP API request failed: ${response.status}`);
                    const data = await response.json();
                    this.location = data.city && data.country_name ? `${data.city}, ${data.country_name}` : (data.country_name || 'Location unavailable');
                } catch (error) {
                    console.warn('Error fetching location:', error);
                    this.location = 'Location unavailable';
                }
                this.updateInfoPanel();
                
                setTimeout(() => {
                    const infoToggle = document.getElementById('infoPanelToggle');
                    if (infoToggle && !document.getElementById('infoPanel').classList.contains('visible')) {
                        infoToggle.style.transform = 'scale(1.2)';
                        infoToggle.style.boxShadow = '0 0 15px var(--accent-color)';
                        setTimeout(() => {
                            infoToggle.style.transform = '';
                            infoToggle.style.boxShadow = '';
                        }, 1500);
                    }
                }, 3000);

                const welcomeMsgEl = document.getElementById('welcomeMessage');
                if (welcomeMsgEl && this.location !== 'Location unavailable' && this.location !== 'Unknown') {
                    // Tagline is now static, but we could update another element if needed
                    // welcomeMsgEl.textContent = `Welcome, visitor from ${this.location}!`;
                }
            }

            updateInfoPanel() {
                const sessionIdEl = document.getElementById('sessionId');
                const visitTimeEl = document.getElementById('visitTime');
                const userLocationEl = document.getElementById('userLocation');
                const interactionCountEl = document.getElementById('interactionCount');
                const pageLoadCountEl = document.getElementById('pageLoadCount');
                const infoSelectedVersionEl = document.getElementById('infoSelectedVersion');
                const lastVisitTimeEl = document.getElementById('lastVisitTime');

                if(sessionIdEl) sessionIdEl.textContent = this.sessionId.substring(5, 15) + '...';
                if(visitTimeEl) visitTimeEl.textContent = new Date(this.startTime).toLocaleTimeString();
                if(userLocationEl) userLocationEl.textContent = this.location;
                if(interactionCountEl) interactionCountEl.textContent = this.interactions;
                if(pageLoadCountEl) pageLoadCountEl.textContent = this.pageLoads;
                if(infoSelectedVersionEl && casinoVersions[selectedCasinoVersionKey]) infoSelectedVersionEl.textContent = casinoVersions[selectedCasinoVersionKey].name;
                
                const lastVisit = localStorage.getItem('flgc_lastVisit_v3');
                if(lastVisitTimeEl) lastVisitTimeEl.textContent = lastVisit ? new Date(parseInt(lastVisit)).toLocaleString() : 'First visit!';
            }

            trackInteraction(type, details = {}) {
                const dataConsentEnabled = JSON.parse(localStorage.getItem('flgc_dataConsent_v3') || 'true');
                if (!dataConsentEnabled && type !== 'setting_changed' && type !== 'preferences_cleared') { // Always log setting changes
                    console.log('Analytics tracking disabled by user. Interaction not logged:', type);
                    return;
                }

                if (!isAuthReady && type !== 'session_start_attempt') { 
                    console.warn("Auth not ready, interaction tracking delayed for:", type);
                    return;
                }

                this.interactions++;
                this.updateInfoPanel();

                const interactionData = {
                    appId: appId,
                    userId: this.userId || 'anonymous_pre_auth',
                    sessionId: this.sessionId,
                    type: type,
                    timestamp: serverTimestamp(),
                    details: { ...details, currentCasinoVersion: selectedCasinoVersionKey },
                    location: this.location,
                    timeOnPageMs: Date.now() - this.startTime,
                    userAgent: navigator.userAgent,
                    viewport: { width: window.innerWidth, height: window.innerHeight },
                    pageUrl: window.location.href,
                    currentTheme: document.body.className.match(/(\w+)-theme/)?.[0] || 'dark-theme',
                    animationsEnabled: !document.body.classList.contains('no-animations'),
                    soundEnabled: soundEnabled
                };

                if (db) {
                    this.logToFirestore('user_interactions_v3', interactionData);
                } else {
                    console.log('Interaction (local):', interactionData);
                }
            }

            async logSessionStart() {
                if (!isAuthReady) {
                     this.trackInteraction('session_start_attempt'); 
                    console.warn("Auth not ready, session start logging delayed.");
                    return;
                }
                const sessionData = {
                    appId: appId,
                    userId: this.userId,
                    sessionId: this.sessionId,
                    startTime: serverTimestamp(),
                    location: this.location,
                    userAgent: navigator.userAgent,
                    referrer: document.referrer || 'direct',
                    language: navigator.language,
                    initialPageLoads: this.pageLoads,
                    screenResolution: `${screen.width}x${screen.height}`,
                    timezoneOffset: new Date().getTimezoneOffset(),
                    connectionType: navigator.connection ? navigator.connection.effectiveType : 'unknown',
                    plugins: Array.from(navigator.plugins).map(p => p.name)
                };

                if (db) {
                    try {
                        await setDoc(doc(db, "user_sessions_v3", this.sessionId), sessionData);
                        console.log("Session start logged to Firestore:", this.sessionId);
                        this.trackInteraction('session_started_successfully');
                    } catch (error) {
                        console.error('Error logging session start to Firestore:', error);
                        updateFirestoreStatus('error', 'Session log failed');
                         this.trackInteraction('session_start_failed', { error: error.message });
                    }
                } else {
                    console.log('Session Start (local):', sessionData);
                }
            }

            async logToFirestore(collectionName, data) {
                if (!db) {
                    console.warn(`Firestore not available. Local log for ${collectionName}:`, data);
                    return;
                }
                try {
                    const docRef = await addDoc(collection(db, collectionName), data);
                    console.log(`Data logged to ${collectionName} (ID: ${docRef.id}):`, data.type);
                } catch (error) {
                    console.error(`Error logging to Firestore (${collectionName}):`, error);
                    updateFirestoreStatus('error', `Log to ${collectionName} failed`);
                }
            }
        }
        const sessionManager = new SessionManager(); 

        // UI Elements
        let infoPanel, securityNoteButton, certificateInfoModal, infoPanelToggle, settingsModal, settingsModalToggle, loadingOverlay, loadingUserText, loadingProgressBar, casinoVersionSelect, versionWarningModal, versionWarningText, confirmRedirectButton, continueButton, themeSelector, animationsToggle, fontSizeSelect, soundToggle, emailNotificationsToggle, pushNotificationsToggle, languageSelect, dataConsentToggle, clearPreferencesBtn, genericModal, genericModalTitle, genericModalBody, whatsNewBtn, feedbackBtn, feedbackModal, feedbackTextarea, submitFeedbackBtn, feedbackResponse, feedbackCategorySelect, userProfileToggle, userProfileDropdown, profileUsername, profileStatus, profileSettingsLink, profileActivityLink, profileLogoutLink, promoBanner, promoText, promoBannerClose, majorDrawCountdownEl, faqBtn, shareBtn, shareModal, copyShareLinkBtn, copyLinkFeedback, didYouKnowTip, didYouKnowClose, tipTextEl;
        
        function initializeDOMElements() {
            infoPanel = document.getElementById('infoPanel');
            infoPanelToggle = document.getElementById('infoPanelToggle');
            settingsModal = document.getElementById('settingsModal');
            settingsModalToggle = document.getElementById('settingsModalToggle');
            loadingOverlay = document.getElementById('loadingOverlay');
            loadingUserText = document.getElementById('loadingUserText');
            loadingProgressBar = document.getElementById('loadingProgressBar');
            casinoVersionSelect = document.getElementById('casinoVersionSelect');
            versionWarningModal = document.getElementById('versionWarningModal');
            versionWarningText = document.getElementById('versionWarningText');
            confirmRedirectButton = document.getElementById('confirmRedirectButton');
            continueButton = document.getElementById('continueButton');
            themeSelector = document.getElementById('themeSelector');
            animationsToggle = document.getElementById('animationsToggle');
            fontSizeSelect = document.getElementById('fontSizeSelect');
            soundToggle = document.getElementById('soundToggle'); 
            emailNotificationsToggle = document.getElementById('emailNotifications');
            pushNotificationsToggle = document.getElementById('pushNotifications');
            languageSelect = document.getElementById('languageSelect');
            dataConsentToggle = document.getElementById('dataConsentToggle');
            clearPreferencesBtn = document.getElementById('clearPreferencesBtn'); 
            genericModal = document.getElementById('genericModal');
            genericModalTitle = document.getElementById('genericModalTitle');
            genericModalBody = document.getElementById('genericModalBody');
            whatsNewBtn = document.getElementById('whatsNewBtn');
            feedbackBtn = document.getElementById('feedbackBtn');
            feedbackModal = document.getElementById('feedbackModal');
            feedbackCategorySelect = document.getElementById('feedbackCategory');
            feedbackTextarea = document.getElementById('feedbackTextarea');
            submitFeedbackBtn = document.getElementById('submitFeedbackBtn');
            feedbackResponse = document.getElementById('feedbackResponse');
            userProfileToggle = document.getElementById('userProfileToggle');
            userProfileDropdown = document.getElementById('userProfileDropdown');
            profileUsername = document.getElementById('profileUsername');
            profileStatus = document.getElementById('profileStatus');
            profileSettingsLink = document.getElementById('profileSettingsLink');
            profileActivityLink = document.getElementById('profileActivityLink');
            profileLogoutLink = document.getElementById('profileLogoutLink');
            promoBanner = document.getElementById('promoBanner');
            promoText = document.getElementById('promoText');
            promoBannerClose = document.getElementById('promoBannerClose');
            majorDrawCountdownEl = document.getElementById('majorDrawCountdown');
            faqBtn = document.getElementById('faqBtn');
            shareBtn = document.getElementById('shareBtn');
            shareModal = document.getElementById('shareModal');
            copyShareLinkBtn = document.getElementById('copyShareLinkBtn');
            copyLinkFeedback = document.getElementById('copyLinkFeedback');
            didYouKnowTip = document.getElementById('didYouKnowTip');
            didYouKnowClose = document.getElementById('didYouKnowClose');
            tipTextEl = document.getElementById('tipText');
            securityNoteButton = document.getElementById('securityNoteButton');
            certificateInfoModal = document.getElementById('certificateInfoModal');
        }


        function setupEventListeners() {
            if(infoPanelToggle) infoPanelToggle.addEventListener('click', () => { toggleInfoPanel(); playSound('C5', '16n'); });
            if(settingsModalToggle) settingsModalToggle.addEventListener('click', () => { toggleModal(settingsModal, true); playSound('D5', '16n'); });
            if(continueButton) continueButton.addEventListener('click', () => { handleContinueRedirect(); playSound('E5', '8n', 'navigate'); });
            if(casinoVersionSelect) casinoVersionSelect.addEventListener('change', handleVersionChange);
            if(confirmRedirectButton) confirmRedirectButton.addEventListener('click', () => { performRedirect(true); playSound('G5', '8n', 'confirm'); });
            
            document.querySelectorAll('.modal-close').forEach(btn => {
                btn.addEventListener('click', () => {
                    const modal = btn.closest('.modal');
                    if (modal) toggleModal(modal, false);
                    playSound('A4', '16n');
                });
            });

            document.querySelectorAll('.feature[data-modal]').forEach(feature => {
                feature.addEventListener('click', () => {
                    const modalId = feature.dataset.modal;
                    const modal = document.getElementById(modalId);
                    if (modal) {
                        toggleModal(modal, true);
                        playSound('F#4', '16n');
                        sessionManager.trackInteraction('feature_modal_opened', { feature: modalId.replace('Modal','') });
                    }
                });
                feature.addEventListener('keypress', (e) => { 
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        feature.click();
                    }
                });
            });
            
            document.addEventListener('keydown', (event) => {
                if (event.key === 'Escape') {
                    const activeModal = document.querySelector('.modal.active');
                    if (activeModal) {
                        toggleModal(activeModal, false);
                        playSound('A4', '16n');
                    } else if (userProfileDropdown && userProfileDropdown.classList.contains('active')) {
                        toggleUserProfileDropdown(false);
                        playSound('A4', '16n');
                    }
                }
            });
            
                        if (securityNoteButton) {
                securityNoteButton.addEventListener('click', () => {
                    toggleModal(certificateInfoModal, true);
                    playSound('E4', '16n'); // Or another appropriate sound
                    sessionManager.trackInteraction('certificate_info_opened');
                });
            }
            
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', (event) => {
                    if (event.target === modal) { 
                        toggleModal(modal, false);
                        playSound('A4', '16n');
                    }
                });
            });

            if(themeSelector) themeSelector.addEventListener('change', (e) => { applyTheme(e.target.value); playSound('C4', '16n'); });
            if(animationsToggle) animationsToggle.addEventListener('change', (e) => { applyAnimationSetting(e.target.checked); playSound(e.target.checked ? 'E4' : 'D4', '16n'); });
            if(fontSizeSelect) fontSizeSelect.addEventListener('change', (e) => { applyFontSize(e.target.value); playSound('F4', '16n'); });
            
            // Settings with feedback
            setupSettingToggle(soundToggle, 'flgc_soundEnabled_v3', 'soundSettingFeedback', 'Sounds', 
                (val) => { soundEnabled = val; console.log(`Sound effects ${val ? 'enabled' : 'disabled'}`); playSound(val ? 'G4' : 'C4', '16n'); }, true);
            setupSettingToggle(emailNotificationsToggle, 'flgc_emailNotifications_v3', 'emailSettingFeedback', 'Email alerts', 
                (val) => console.log(`Email notifications ${val ? 'enabled' : 'disabled'}`), true);
            setupSettingToggle(pushNotificationsToggle, 'flgc_pushNotifications_v3', 'pushSettingFeedback', 'Push alerts', 
                (val) => console.log(`Push notifications ${val ? 'enabled' : 'disabled'}`), false);
            setupSettingToggle(dataConsentToggle, 'flgc_dataConsent_v3', 'dataConsentFeedback', 'Analytics', 
                (val) => console.log(`Data consent ${val ? 'enabled' : 'disabled'}`), true);

            if(languageSelect) languageSelect.addEventListener('change', (e) => {
                const langName = e.target.options[e.target.selectedIndex].text;
                localStorage.setItem('flgc_language_v3', e.target.value);
                updateSettingFeedback('languageSettingFeedback', `Language: ${langName}`);
                sessionManager.trackInteraction('setting_changed', { setting: 'language', value: e.target.value });
                playSound('G4', '16n');
                openGenericModal("Language Preference Updated", `Language preference set to ${langName}. <br><small>(Full content translation is a mock-up for this demo.)</small>`);
                // Mock: Change tagline text
                if(e.target.value === 'es') document.getElementById('welcomeMessage').textContent = 'Gira por Lujo Irreal - Con la tecnologÃ­a de Bitflash (Mock)';
                else if(e.target.value === 'fr') document.getElementById('welcomeMessage').textContent = 'Tournez pour un Luxe IrrÃ©el - PropulsÃ© par Bitflash (Mock)';
                else document.getElementById('welcomeMessage').textContent = 'Spin for Unreal Luxury - Powered by Bitflash';
            });


            if(clearPreferencesBtn) clearPreferencesBtn.addEventListener('click', () => {
                playSound('C3', '2n', 'error');
                if (window.confirm("Are you sure you want to clear all local preferences? This will reset your Theme and Font Size.")) {
                    Object.keys(localStorage).forEach(key => {
                        if (key.startsWith('flgc_') && key.includes('_v3')) localStorage.removeItem(key);
                    });
                    sessionManager.trackInteraction('preferences_cleared');
                    window.alert("Preferences cleared. Please reload the page for full effect.");
                    loadSettings(); 
                    playSound('E5', '8n', 'confirm');
                }
            });

            if(whatsNewBtn) whatsNewBtn.addEventListener('click', () => {
                openGenericModal("ð What's New in FLGC Landing v2.6 (Info Update)", `
                    <p>Welcome to the latest iteration of the FLGC Landing Experience!</p>
                    <ul>
                        <li><i class="fas fa-info-circle" style="color:var(--blue)"></i> <strong>Accurate FLGC Information:</strong> Content updated with details from the main FLGC app, including games, prize info, and the 5 Free Spins signup bonus.</li>
                        <li><i class="fas fa-gamepad" style="color:var(--green)"></i> <strong>Game Details:</strong> Modals now reflect the actual game offerings like Classic Slots, Prize Wheel, Crypto Crash, Plinko, Blackjack, and Roulette.</li>
                        <li><i class="fas fa-gift" style="color:var(--purple)"></i> <strong>Prize Info:</strong> Rewards modal highlights the types of luxury prizes and Bitflash Bucks.</li>
                        <li><i class="fas-fa-star" style="color:var(--gold)"></i> <strong>5 Free Spins:</strong> Prominently featured as a signup bonus.</li>
                        <li><i class="fas fa-music" style="color:var(--green)"></i> Interactive Sound Effects: Toggle UI sounds in settings (uses Tone.js).</li>
                        <li><i class="fas fa-user-astronaut" style="color:var(--purple)"></i> Mock User Profile: Access a user dropdown from the top bar.</li>
                        <li><i class="fas fa-tags" style="color:var(--blue)"></i> Promotional Banner: See mock promotions appear.</li>
                        <li><i class="fas fa-stopwatch-20" style="color:var(--red)"></i> Next Draw Countdown: A visual timer for the next big event.</li>
                        <li><i class="fas fa-lightbulb" style="color:var(--gold)"></i> 'Did You Know?' Tips: Helpful hints appear periodically.</li>
                        <li><i class="fas fa-share-square" style="color:var(--green)"></i> Share Functionality: Mock share modal with copy link.</li>
                    </ul>
                    <p>We're constantly working to enhance your experience!</p>
                `);
                playSound('C5', '16n');
                sessionManager.trackInteraction('whats_new_opened');
            });

            if (feedbackBtn) {
                feedbackBtn.addEventListener('click', () => {
                    window.open('http://cs.flgc.xyz/', '_blank'); // Opens in a new tab
                    playSound('D5', '16n');
                    sessionManager.trackInteraction('feedback_link_opened');
                });
            }

            if(submitFeedbackBtn) submitFeedbackBtn.addEventListener('click', async () => {
                const feedback = feedbackTextarea.value.trim();
                const category = feedbackCategorySelect.value;
                if (feedback.length < 10) {
                    feedbackResponse.textContent = 'Please provide more detailed feedback (at least 10 characters).';
                    feedbackResponse.style.color = 'var(--red)';
                    playSound('C3', '4n', 'error');
                    return;
                }
                
                const feedbackData = {
                    appId: appId,
                    userId: sessionManager.userId || 'anonymous',
                    sessionId: sessionManager.sessionId,
                    timestamp: serverTimestamp(),
                    feedbackText: feedback,
                    category: category,
                    pageUrl: window.location.href,
                    userAgent: navigator.userAgent,
                    selectedCasinoVersion: selectedCasinoVersionKey
                };

                feedbackResponse.textContent = 'Submitting feedback...';
                feedbackResponse.style.color = 'var(--gold)';
                playSound('E4', '8n');

                if (db) {
                    try {
                        await sessionManager.logToFirestore('user_feedback_v3', feedbackData);
                        feedbackResponse.textContent = 'Thank you for your feedback!';
                        feedbackResponse.style.color = 'var(--green)';
                        playSound('G5', '8n', 'confirm');
                        sessionManager.trackInteraction('feedback_submitted', { length: feedback.length, category: category });
                        setTimeout(() => toggleModal(feedbackModal, false), 2000);
                    } catch (error) {
                        console.error('Error submitting feedback:', error);
                        feedbackResponse.textContent = 'Error submitting feedback. Please try again later.';
                        feedbackResponse.style.color = 'var(--red)';
                        playSound('C3', '2n', 'error');
                        sessionManager.trackInteraction('feedback_submission_failed', { error: error.message });
                    }
                } else {
                    console.log('Feedback (local):', feedbackData);
                    feedbackResponse.textContent = 'Feedback logged locally (Firestore not available).';
                    feedbackResponse.style.color = 'var(--green)';
                    playSound('G5', '8n', 'confirm');
                    sessionManager.trackInteraction('feedback_submitted_local', { length: feedback.length, category: category });
                    setTimeout(() => toggleModal(feedbackModal, false), 2000);
                }
            });
            
            const termsLink = document.getElementById('termsLink');
            const privacyLink = document.getElementById('privacyLink');
            const responsibleGamingLink = document.getElementById('responsibleGamingLink');
            const contactLink = document.getElementById('contactLink');

if (termsLink) {
  termsLink.addEventListener('click', () => {
    window.open('https://flgc.xyz/legal', '_blank');
  });
}

if (privacyLink) {
  privacyLink.addEventListener('click', () => {
    window.open('https://flgcas.web.app/privacypolicy', '_blank');
  });
}

            if(userProfileToggle) userProfileToggle.addEventListener('click', (e) => { e.stopPropagation(); toggleUserProfileDropdown(); playSound('D5'); });
            document.addEventListener('click', (e) => { // Close dropdown if clicked outside
                if (userProfileDropdown && userProfileDropdown.classList.contains('active') && !userProfileToggle.contains(e.target) && !userProfileDropdown.contains(e.target)) {
                    toggleUserProfileDropdown(false);
                }
            });
            if(profileSettingsLink) profileSettingsLink.addEventListener('click', (e) => { e.preventDefault(); toggleModal(settingsModal, true); toggleUserProfileDropdown(false); playSound('E5'); });
            if(profileActivityLink) profileActivityLink.addEventListener('click', (e) => { e.preventDefault(); openGenericModal('My Activity (Mock)', '<p>This section would show your recent game play, transactions, and bonus activity.</p><p><em>Feature coming soon!</em></p>'); toggleUserProfileDropdown(false); playSound('E5'); });
            if(profileLogoutLink) profileLogoutLink.addEventListener('click', handleLogout);
            
            if(promoBannerClose) promoBannerClose.addEventListener('click', () => { promoBanner.classList.add('hidden'); localStorage.setItem('flgc_promoDismissed_v3', 'true'); playSound('A4'); sessionManager.trackInteraction('promo_banner_dismissed'); });
            
            if(faqBtn) faqBtn.addEventListener('click', () => {
                openGenericModal('ð¡ Quick Tips & FAQ', `
                    <h4>How do I get started?</h4><p>Simply click "Continue to Casino"! New players receive 5 Free Spins automatically.</p>
                    <h4>What games are available?</h4><p>FLGC offers Classic Slots, Prize Wheel, Crypto Crash, Plinko, Blackjack, and Roulette, plus a special Jackpot Wheel.</p>
                    <h4>How do I win prizes?</h4><p>Play games to win Bitflash Bucks and Bonus Spins and bet Bucks on more games. Accumulate progress to spin the Jackpot Wheel.</p>
                    <h4>Is this real gambling?</h4><p>No, FLGC is for entertainment purposes only. Winnings are virtual and cannot be exchanged for real money or items.</p>
                `);
                playSound('C5');
                sessionManager.trackInteraction('faq_modal_opened');
            });

            if(shareBtn) shareBtn.addEventListener('click', () => { toggleModal(shareModal, true); playSound('D5'); sessionManager.trackInteraction('share_modal_opened'); });
            if(copyShareLinkBtn) copyShareLinkBtn.addEventListener('click', copyShareLink);
            if(didYouKnowClose) didYouKnowClose.addEventListener('click', () => { didYouKnowTip.classList.add('hidden'); playSound('A4'); sessionManager.trackInteraction('tip_dismissed'); });
        }


        // Functions
        function toggleInfoPanel(forceShow = null) {
            if(!infoPanel || !infoPanelToggle) return;
            const visible = infoPanel.classList.toggle('visible', forceShow);
            infoPanelToggle.setAttribute('aria-expanded', visible.toString());
            sessionManager.trackInteraction('info_panel_toggled', { visible: visible });
        }

        function toggleModal(modalElement, show) {
            if (!modalElement) return;
            if (show) {
                modalElement.classList.add('active');
                modalElement.setAttribute('aria-hidden', 'false');
                const focusable = modalElement.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
                if (focusable) setTimeout(() => focusable.focus(), 50); // Timeout for transition
                 sessionManager.trackInteraction('modal_toggled', { modalId: modalElement.id, shown: true });
            } else {
                modalElement.classList.remove('active');
                modalElement.setAttribute('aria-hidden', 'true');
                sessionManager.trackInteraction('modal_toggled', { modalId: modalElement.id, shown: false });
            }
        }
        
        window.openGenericModal = function(title, contentHtml) {
            if(!genericModal || !genericModalTitle || !genericModalBody) return;
            genericModalTitle.innerHTML = title; // Allow icons in title
            genericModalBody.innerHTML = contentHtml;
            toggleModal(genericModal, true);
            sessionManager.trackInteraction('generic_modal_opened', { title: title });
        }


        function handleContinueRedirect() {
            if(!casinoVersions || !selectedCasinoVersionKey || !versionWarningModal || !versionWarningText) return;
            const version = casinoVersions[selectedCasinoVersionKey];
            sessionManager.trackInteraction('redirect_initiated', {
                destinationKey: selectedCasinoVersionKey,
                destinationUrl: version.url,
                warningPresented: !!version.warning
            });

            if (version.warning) {
                versionWarningText.innerHTML = `<p>${version.warning}</p><p>You are selecting: <strong>${version.name}</strong>.</p><p>Are you sure you want to proceed to this version?</p>`;
                toggleModal(versionWarningModal, true);
                playSound('E4', '4n', 'error');
            } else {
                performRedirect(false); 
            }
        }

        function handleVersionChange(event) {
            selectedCasinoVersionKey = event.target.value;
            localStorage.setItem('flgc_selectedVersion_v3', selectedCasinoVersionKey);
            sessionManager.trackInteraction('casino_version_selected', { version: selectedCasinoVersionKey, name: casinoVersions[selectedCasinoVersionKey].name });
            const infoSelectedVersionEl = document.getElementById('infoSelectedVersion');
            if(infoSelectedVersionEl && casinoVersions[selectedCasinoVersionKey]) infoSelectedVersionEl.textContent = casinoVersions[selectedCasinoVersionKey].name;
            console.log(`Casino version changed to: ${casinoVersions[selectedCasinoVersionKey].name}`);
            playSound('C4', '16n');
        }

        function performRedirect(fromWarning) {
            if(!versionWarningModal || !loadingOverlay || !loadingUserText || !loadingProgressBar) return;
            toggleModal(versionWarningModal, false); 
            loadingOverlay.classList.add('active');
            loadingUserText.textContent = `Preparing...`;
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 10 + 5; 
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    sessionManager.trackInteraction('redirect_finalizing', { version: selectedCasinoVersionKey, fromWarning: fromWarning });
                    window.location.href = casinoVersions[selectedCasinoVersionKey].url;
                }
                loadingProgressBar.style.width = `${progress}%`;
            }, 100); 

            setTimeout(() => {
                if (loadingOverlay.classList.contains('active')) { 
                    console.warn("Redirect fallback timeout triggered.");
                    sessionManager.trackInteraction('redirect_fallback_timeout', { version: selectedCasinoVersionKey });
                    window.location.href = casinoVersions[selectedCasinoVersionKey].url;
                }
            }, 5000); 
        }

        function updateFirestoreStatus(status, message = '') {
            const statusTextEl = document.getElementById('firestoreStatusText');
            const statusIndicatorEl = document.getElementById('firestoreStatus');
            if (!statusTextEl || !statusIndicatorEl) return;
            
            statusIndicatorEl.className = `info-status status-${status}`;
            statusTextEl.innerHTML = `${message} <span class="info-status status-${status}" id="firestoreStatus"></span>`;
            console.log(`Firestore Status: ${status} ${message}`);
        }
        function applyTheme(themeName) {
            document.body.classList.remove('dark-theme', 'light-theme', 'gold-theme');
            document.body.classList.add(`${themeName}-theme`);
            localStorage.setItem('flgc_theme_v3', themeName);
            sessionManager.trackInteraction('setting_changed', { setting: 'theme', value: themeName });
            console.log(`Theme changed to: ${themeName}`);
        }

        function applyAnimationSetting(enabled) {
            if (enabled) {
                document.body.classList.remove('no-animations');
                document.body.classList.add('animations-forced'); 
            } else {
                document.body.classList.add('no-animations');
                document.body.classList.remove('animations-forced');
            }
            localStorage.setItem('flgc_animationsEnabled_v3', enabled);
            sessionManager.trackInteraction('setting_changed', { setting: 'animations', value: enabled });
        }
        
        function applyFontSize(size) {
            document.body.classList.remove('font-size-large', 'font-size-xlarge');
            if (size === 'large') document.body.classList.add('font-size-large');
            if (size === 'xlarge') document.body.classList.add('font-size-xlarge');
            localStorage.setItem('flgc_fontSize_v3', size);
            sessionManager.trackInteraction('setting_changed', { setting: 'fontSize', value: size });
        }

        function updateSettingFeedback(elementId, text) {
            const el = document.getElementById(elementId);
            if (el) el.textContent = text;
        }

        function setupSettingToggle(toggleElement, storageKey, feedbackElementId, feedbackPrefix, callback, defaultValue) {
            if (!toggleElement) return;
            toggleElement.addEventListener('change', (e) => {
                const isChecked = e.target.checked;
                localStorage.setItem(storageKey, isChecked);
                updateSettingFeedback(feedbackElementId, `${feedbackPrefix}: ${isChecked ? 'Enabled' : 'Disabled'}`);
                sessionManager.trackInteraction('setting_changed', { setting: storageKey.replace('flgc_', '').replace('_v3',''), value: isChecked });
                if (callback) callback(isChecked);
            });
            // Load initial state
            const savedValue = localStorage.getItem(storageKey);
            const initialValue = savedValue !== null ? JSON.parse(savedValue) : defaultValue;
            toggleElement.checked = initialValue;
            updateSettingFeedback(feedbackElementId, `${feedbackPrefix}: ${initialValue ? 'Enabled' : 'Disabled'}`);
            if (callback) callback(initialValue); // Apply initial state
        }


        function loadSettings() {
            // Casino Version
            const savedVersion = localStorage.getItem('flgc_selectedVersion_v3');
            if (savedVersion && casinoVersions[savedVersion]) {
                selectedCasinoVersionKey = savedVersion;
               if(casinoVersionSelect) casinoVersionSelect.value = savedVersion;
            } else { 
               if(casinoVersionSelect) casinoVersionSelect.value = selectedCasinoVersionKey; 
            }
            const infoSelectedVersionEl = document.getElementById('infoSelectedVersion');
            if(infoSelectedVersionEl && casinoVersions[selectedCasinoVersionKey]) infoSelectedVersionEl.textContent = casinoVersions[selectedCasinoVersionKey].name;

            // Theme
            const savedTheme = localStorage.getItem('flgc_theme_v3') || 'dark';
            applyTheme(savedTheme);
            const themeRadio = document.querySelector(`input[name="theme"][value="${savedTheme}"]`);
            if(themeRadio) themeRadio.checked = true;

            // Animations
            const savedAnimations = localStorage.getItem('flgc_animationsEnabled_v3');
            const animationsEnabled = savedAnimations !== null ? JSON.parse(savedAnimations) : true;
            applyAnimationSetting(animationsEnabled);
            if(animationsToggle) animationsToggle.checked = animationsEnabled;

            // Font Size
            const savedFontSize = localStorage.getItem('flgc_fontSize_v3') || 'normal';
            applyFontSize(savedFontSize);
            if(fontSizeSelect) fontSizeSelect.value = savedFontSize;
            
            // Language
            const languageSelectEl = document.getElementById('languageSelect');
            const savedLang = localStorage.getItem('flgc_language_v3') || 'en';
            if(languageSelectEl) {
                languageSelectEl.value = savedLang;
                updateSettingFeedback('languageSettingFeedback', `Language: ${languageSelectEl.options[languageSelectEl.selectedIndex].text}`);
            }
            console.log("Settings loaded from localStorage.");
        }

        function updateDynamicContent() {
            const playersOnlineEl = document.getElementById('playersOnline');
            if (playersOnlineEl) {
                const baseCount = 118521; // From FLGC source
                const variation = Math.floor(Math.random() * 1501) - 750; 
                playersOnlineEl.textContent = (baseCount + variation).toLocaleString();
            }
            const currentYearEl = document.getElementById('currentYear');
            if(currentYearEl) currentYearEl.textContent = new Date().getFullYear();
        }

        function toggleUserProfileDropdown(forceShow = null) {
            if (!userProfileDropdown || !userProfileToggle) return;
            const show = forceShow !== null ? forceShow : !userProfileDropdown.classList.contains('active');
            userProfileDropdown.classList.toggle('active', show);
            userProfileToggle.setAttribute('aria-expanded', show.toString());
            sessionManager.trackInteraction('user_profile_toggled', { visible: show });
        }

        function updateUserProfileDropdown() {
            if (!profileUsername || !profileStatus) return;
            if (currentUserId) {
                profileUsername.textContent = `Player ${currentUserId.substring(0, 6)}...`;
                profileStatus.textContent = "Status: Verified";
            } else {
                profileUsername.textContent = "Guest Player";
                profileStatus.textContent = "Status: Not Logged In";
            }
        }
        async function handleLogout(event) {
            event.preventDefault();
            playSound('A3', '4n', 'error');
            sessionManager.trackInteraction('logout_initiated');
            toggleUserProfileDropdown(false);
            if (auth) {
                try {
                    await signOut(auth);
                    console.log("User signed out successfully.");
                    // onAuthStateChanged will handle UI updates for logged-out state
                    openGenericModal("Logged Out", "<p>You have been successfully logged out.</p><p>You are now browsing as a guest.</p>");
                    sessionManager.trackInteraction('logout_successful');
                } catch (error) {
                    console.error("Error signing out: ", error);
                    openGenericModal("Logout Error", "<p>Could not log out at this time. Please try again later.</p>");
                    sessionManager.trackInteraction('logout_failed', { error: error.message });
                }
            } else { 
                currentUserId = null;
                updateUserProfileDropdown();
                openGenericModal("Logged Out (Local)", "<p>You have been logged out locally.</p>");
                sessionManager.trackInteraction('logout_successful_local');
            }
        }

        function showPromoBanner() {
            if (promoBanner && localStorage.getItem('flgc_promoDismissed_v3') !== 'true') {
                const promos = [
                    "ð Weekend Jackpot Madness is ON! Triple Bitflash Bucks on selected slots!",
                    "ð New Game Launched: 'Galactic Gems'! Play now for exclusive launch bonuses & 5 Free Spins!",
                    "ð° Special Offer: Get 10 Extra Spins when you try our new Plinko game!",
                    "ð Join the Weekly FLGC Tournament - $10,000,000 in Bitflash Bucks Prize Pool!"
                ];
                promoText.innerHTML = promos[Math.floor(Math.random() * promos.length)]; // Use innerHTML for strong tags
                promoBanner.classList.remove('hidden');
                sessionManager.trackInteraction('promo_banner_shown', { text: promoText.textContent });
            }
        }

        let drawCountdownInterval;
        function startMajorDrawCountdown() {
            let duration = parseInt(localStorage.getItem('flgc_drawCountdown_v3') || (24 * 60 * 60)); // 24 hours in seconds

            function updateCountdown() {
                duration--;
                if (duration < 0) {
                    duration = 24 * 60 * 60; // Reset
                    sessionManager.trackInteraction('major_draw_reset_mock');
                     openGenericModal("ð Major Prize Drop! ð", "<p>The major prize drop has just occurred! Check the (non-existent) winners page. New countdown started for the next drop!</p>");
                }
                localStorage.setItem('flgc_drawCountdown_v3', duration.toString());

                const hours = Math.floor(duration / 3600);
                const minutes = Math.floor((duration % 3600) / 60);
                const seconds = duration % 60;
                if(majorDrawCountdownEl) majorDrawCountdownEl.textContent = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }
            if (drawCountdownInterval) clearInterval(drawCountdownInterval);
            drawCountdownInterval = setInterval(updateCountdown, 1000);
            updateCountdown(); // Initial call
        }

        function copyShareLink() {
            if (!shareModal) return;
            const linkInput = shareModal.querySelector('#shareLinkInput');
            linkInput.select();
            linkInput.setSelectionRange(0, 99999); // For mobile devices
            try {
                document.execCommand('copy'); // Using execCommand due to potential iframe restrictions
                if(copyLinkFeedback) copyLinkFeedback.textContent = "Link copied to clipboard!";
                playSound('G5', '16n', 'confirm');
                sessionManager.trackInteraction('share_link_copied');
            } catch (err) {
                if(copyLinkFeedback) copyLinkFeedback.textContent = "Failed to copy. Please copy manually.";
                playSound('C3', '8n', 'error');
                console.error('Failed to copy link: ', err);
                sessionManager.trackInteraction('share_link_copy_failed');
            }
            setTimeout(() => { if(copyLinkFeedback) copyLinkFeedback.textContent = ""; }, 2000);
        }
        
        function showDidYouKnowTip() {
            if (didYouKnowTip && Math.random() < 0.7) { // Show more frequently
                const tips = [
                    "New players get <strong>5 FREE SPINS</strong> on signup!",
                    "FLGC features games like Slots, Prize Wheel, Crash, Plinko, Blackjack, and Roulette!",
                    "You can win over 5000+ unique luxury prizes, including cars and cash jackpots.",
                    "The casino is powered by Bitflash and uses 'Bitflash Bucks' as currency.",
                    "Check out the VIP program for enhanced win chances and more rewards.",
                    "The 'Bitflash Black Market' is where you can spend your Bucks on special items."
                ];
                tipTextEl.innerHTML = tips[Math.floor(Math.random() * tips.length)];
                didYouKnowTip.classList.remove('hidden');
                sessionManager.trackInteraction('tip_shown', { tip: tipTextEl.textContent });
            }
        }
        

        // Initial Setup
        document.addEventListener('DOMContentLoaded', () => {
            initializeDOMElements(); 
            setupEventListeners();   
            loadSettings(); // This will also apply initial sound setting
            updateDynamicContent(); 
            setInterval(updateDynamicContent, 5000); 
            if(sessionManager) sessionManager.trackInteraction('page_loaded_v3');
            localStorage.setItem('flgc_lastVisit_v3', Date.now().toString());
            
            setInterval(cycleSystemStatuses, 7000); // Cycle mock system statuses
            cycleSystemStatuses(); // Initial call

            showDidYouKnowTip(); // Attempt to show a tip

            // Populate casino version dropdown
            if (casinoVersionSelect) {
                Object.keys(casinoVersions).forEach(key => {
                    const option = document.createElement('option');
                    option.value = key;
                    option.textContent = casinoVersions[key].name;
                    casinoVersionSelect.appendChild(option);
                });
                // Ensure the loaded setting is correctly applied after populating
                const savedVersion = localStorage.getItem('flgc_selectedVersion_v3');
                 if (savedVersion && casinoVersions[savedVersion]) {
                    selectedCasinoVersionKey = savedVersion;
                    casinoVersionSelect.value = savedVersion;
                } else {
                    casinoVersionSelect.value = selectedCasinoVersionKey;
                }
                const infoSelectedVersionEl = document.getElementById('infoSelectedVersion');
                if(infoSelectedVersionEl && casinoVersions[selectedCasinoVersionKey]) infoSelectedVersionEl.textContent = casinoVersions[selectedCasinoVersionKey].name;
            }
        });

        // Track page visibility
        document.addEventListener('visibilitychange', () => {
            if(sessionManager) sessionManager.trackInteraction(document.hidden ? 'page_hidden' : 'page_visible', { title: document.title });
        });

        let scrollTracked = false;
        window.addEventListener('scroll', () => {
            if (!scrollTracked && (window.scrollY > 100)) {
                if(sessionManager) sessionManager.trackInteraction('page_scrolled_significant');
                scrollTracked = true;
            }
        }, { passive: true });

        let mouseTracked = false;
        document.addEventListener('mousemove', () => {
            if (!mouseTracked) {
                if(sessionManager) sessionManager.trackInteraction('mouse_active_on_page');
                mouseTracked = true;
            }
        }, { once: true }); 

        window.addEventListener('beforeunload', () => {
            if(!sessionManager) return;
            const sessionDuration = Date.now() - sessionManager.startTime;
            const endData = {
                durationMs: sessionDuration,
                totalInteractions: sessionManager.interactions,
                finalCasinoVersionSelected: selectedCasinoVersionKey,
                finalTheme: localStorage.getItem('flgc_theme_v3') || 'dark'
            };
            sessionManager.trackInteraction('session_ending_attempt', endData);
            if (db) { 
                const logPayload = { ...endData, appId, userId: currentUserId, sessionId: sessionManager.sessionId, timestamp: new Date().toISOString() };
                if (navigator.sendBeacon) {
                    // This would require a backend endpoint to receive the beacon
                    // const blob = new Blob([JSON.stringify({ collection: 'session_ends_beacon_v3', data: logPayload })], { type: 'application/json' });
                    // navigator.sendBeacon('/log-beacon-endpoint', blob); 
                    console.log("Attempted to send session end data via beacon (mocked).");
                } else {
                     console.log("Beacon API not available for session end log.");
                }
            }
        });
        
        window.onerror = function(message, source, lineno, colno, error) {
            const errorData = {
                message: message,
                source: source,
                lineno: lineno,
                colno: colno,
                errorObj: error ? error.stack : null
            };
            if(sessionManager) sessionManager.trackInteraction('javascript_error', errorData);
            console.error("Global JS Error Caught:", errorData);
            return false; 
        };
        window.onunhandledrejection = function(event) {
            const errorData = {
                reason: event.reason ? (event.reason.message || event.reason) : 'Unknown promise rejection',
                stack: event.reason ? event.reason.stack : null
            };
            if(sessionManager) sessionManager.trackInteraction('unhandled_promise_rejection', errorData);
            console.error("Unhandled Promise Rejection:", errorData);
        };
</script>

            <script type="module">
        // --- Firebase Configuration ---
        const firebaseConfig = {
            apiKey: "AIzaSyBTdVFjuVLtKVvdVc-wTL5Lt_ed9T_csYs",
            authDomain: "flgcproject.firebaseapp.com",
            projectId: "flgcproject",
            storageBucket: "flgcproject.firebasestorage.app",
            messagingSenderId: "530670013869",
            appId: "1:530670013869:web:bfffbf46f2112252b7e524"
        };

        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
        
        // --- Initialize Firebase ---
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- DOM Elements ---
        const userRatingStatEl = document.getElementById('user-rating-stat');

        // --- Fetch and Display Ratings ---
        async function fetchAndDisplayAverageRating() {
            try {
                const ratingsCol = collection(db, 'ratings');
                const ratingSnapshot = await getDocs(ratingsCol);
                
                if (ratingSnapshot.empty) {
                    userRatingStatEl.innerHTML = `N/A`;
                    return;
                }
                
                let totalRating = 0;
                let ratingCount = 0;
                
                ratingSnapshot.forEach(doc => {
                    const data = doc.data();
                    if (data.rating && typeof data.rating === 'number') {
                        totalRating += data.rating;
                        ratingCount++;
                    }
                });

                if (ratingCount > 0) {
                    const averageRating = totalRating / ratingCount;
                    // Format to one decimal place
                    const displayRating = averageRating.toFixed(1);
                    userRatingStatEl.innerHTML = `${displayRating}<i class="fas fa-star" style="color: var(--gold); font-size: 0.7em; margin-left: 4px;"></i>`;
                } else {
                     userRatingStatEl.innerHTML = `N/A`;
                }

            } catch (error) {
                console.error("Error fetching ratings: ", error);
                userRatingStatEl.textContent = 'Error';
            }
        }
        

        // --- Initial Load ---
        document.addEventListener('DOMContentLoaded', () => {
            fetchAndDisplayAverageRating()
        });
    </script>
   <script> 
        console.log('ð°//legacy FLGC Enhanced Landing Page Initialized (v2.6 - Info Update)');
        console.log('Firebase App ID:', appId);
        console.log('Firebase Config Source:', firebaseConfigFromGlobal ? 'Global Variable' : 'Local Fallback');
    </script>
<script>
   window.addEventListener('DOMContentLoaded', () => {
    if (window.location.pathname !== '/' || window.location.search) {
      window.location.href = '/';
    }
  }); 
</script>
</body>
</html>
